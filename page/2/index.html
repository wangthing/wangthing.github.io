<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>欢迎</title>


    <meta name="description" content="快乐的麻瓜---博客">
<meta property="og:type" content="website">
<meta property="og:title" content="欢迎">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="欢迎">
<meta property="og:description" content="快乐的麻瓜---博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="欢迎" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">主页</a>
                
                <a class="navbar-item"
                href="/archives">成就</a>
                
                <a class="navbar-item"
                href="/categories">分类</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/wangthing/wangthing.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-31T01:36:50.000Z">2020-01-31</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 分钟 读完 (大约 2408 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/31/%E6%88%91%E8%AF%BBVue%E6%BA%90%E7%A0%81-1/">我读Vue源码-1</a>
            
        </h1>
        <div class="content">
            <p>​    心态有点崩，刚刚写了一个小时居然没有保存，然后不小心关电脑了，前面写的一大堆废话都没了。不管了先从现在看的写，前面写的有空的话再不回来。多按按 <code>ctrl+s</code> ，别总是按 <code>ctrl+a ctrl+c  ctrl+v</code></p>
<p>​    第二天过来补充，没想到昨天状态还不错，读到了快1200行，工具函数读完之后就到了响应式的实现了，响应式的实现主要是<strong>发布监听</strong>来实现，通过拦截传入的数据，赋值到this上面，然后通过 <code>Object.defineProperty()</code>来设置属性的 <code>getter、setter</code> 方法，在设置了 <code>__ob__</code>的值上面会在数据发生变化时通知 订阅 更新。当然还有特殊的对象比如数组，可以拦截 <code>sort splice push unshift</code> 等这些会改变数组的方法。</p>
<h2 id="现在开始"><a href="#现在开始" class="headerlink" title="现在开始"></a>现在开始</h2><p>之前说过在710行出现 <code>uid</code> 之前的代码都是一些变量和工具函数的定义。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"> &#x2F;&#x2F; 阻止修改1现有属性的特性和值，也不能添加新的属性</span><br><span class="line"> var emptyObject &#x3D; Object.freeze(&#123;&#125;);</span><br><span class="line">  </span><br><span class="line">&#x2F;&#x2F;判断一个变量的值是不是 undefined或者是null</span><br><span class="line"> function isUndef (v) &#123;</span><br><span class="line">   return v &#x3D;&#x3D;&#x3D; undefined || v &#x3D;&#x3D;&#x3D; null</span><br><span class="line"> &#125;</span><br><span class="line">&#x2F;&#x2F;判断一个变量的值是否定义了，也就是不为undefine和null</span><br><span class="line"> function isDef (v) &#123;</span><br><span class="line">   return v !&#x3D;&#x3D; undefined &amp;&amp; v !&#x3D;&#x3D; null</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> &#x2F;&#x2F;判断一个布尔值真假，也就是是不是真的等于 true</span><br><span class="line"> &#x2F;&#x2F;而不是 &#x3D;&#x3D; 会发生隐式转化后为true</span><br><span class="line"> function isTrue (v) &#123;</span><br><span class="line">   return v &#x3D;&#x3D;&#x3D; true</span><br><span class="line"> &#125;</span><br><span class="line">&#x2F;&#x2F;和上面是一样的</span><br><span class="line"> function isFalse (v) &#123;</span><br><span class="line">   return v &#x3D;&#x3D;&#x3D; false</span><br><span class="line"> &#125;</span><br><span class="line">  </span><br><span class="line">&#x2F;&#x2F; 判断是否为原始值</span><br><span class="line">&#x2F;&#x2F; ES5原始值有 string number boolean</span><br><span class="line">&#x2F;&#x2F; ES6新增了 symbol</span><br><span class="line"> function isPrimitive (value) &#123;</span><br><span class="line">   return (</span><br><span class="line">     typeof value &#x3D;&#x3D;&#x3D; &#39;string&#39; ||</span><br><span class="line">     typeof value &#x3D;&#x3D;&#x3D; &#39;number&#39; ||</span><br><span class="line">     &#x2F;&#x2F; $flow-disable-line</span><br><span class="line">     typeof value &#x3D;&#x3D;&#x3D; &#39;symbol&#39; ||</span><br><span class="line">     typeof value &#x3D;&#x3D;&#x3D; &#39;boolean&#39;</span><br><span class="line">   )</span><br><span class="line"> &#125;</span><br><span class="line"> 	</span><br><span class="line"> </span><br><span class="line"> &#x2F;&#x2F;判断是原始值还是对象，当我们知道值是</span><br><span class="line">&#x2F;&#x2F;json 兼容型</span><br><span class="line"> function isObject (obj) &#123;</span><br><span class="line">   return obj !&#x3D;&#x3D; null &amp;&amp; typeof obj &#x3D;&#x3D;&#x3D; &#39;object&#39;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>判断一个值的原始类型字符串，利用Objet原型上的 <code>toString()</code> 方法,因为Object下面各个对象都重写了自己的 <code>toString()</code> 方法，而Object上的就是返回原始类型的字符串的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var _toString &#x3D; Object.prototype.toString;</span><br><span class="line">  	  </span><br><span class="line">function toRawType (value) &#123;</span><br><span class="line">  return _toString.call(value).slice(8, -1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断一个值是不是真的JavaScript对象，比如 node节点 <code>typeof</code> 返回的是 <code>object</code>,但是严格上来讲是 <code>NodeList</code> ，而不是我们认为的 json对象那种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function isPlainObject (obj) &#123;</span><br><span class="line">     return _toString.call(obj) &#x3D;&#x3D;&#x3D; &#39;[object Object]&#39;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断是不是一个合格的数组下标</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function isValidArrayIndex (val) &#123;</span><br><span class="line">     var n &#x3D; parseFloat(String(val));</span><br><span class="line">     return n &gt;&#x3D; 0 &amp;&amp; Math.floor(n) &#x3D;&#x3D;&#x3D; n &amp;&amp; isFinite(val)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断是不是一个 <code>Promise</code> 值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function isPromise (val) &#123;</span><br><span class="line">  return (</span><br><span class="line">    isDef(val) &amp;&amp;</span><br><span class="line">    typeof val.then &#x3D;&#x3D;&#x3D; &#39;function&#39; &amp;&amp;</span><br><span class="line">    typeof val.catch &#x3D;&#x3D;&#x3D; &#39;function&#39;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把一个值转化成实际所呈现出来的字符串（不是很能理解）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function toString (val) &#123;</span><br><span class="line">  return val &#x3D;&#x3D; null			&#x2F;&#x2F;null或者undefined就返回空字符串而不是&#39;null&#39;、&#39;undefined&#39;</span><br><span class="line">  ? &#39;&#39;</span><br><span class="line">  :Array.isArray(val) || （isPlainObject(val) &amp;&amp; val.toString &#x3D;&#x3D;&#x3D; _toString）</span><br><span class="line">  &#x2F;&#x2F;是一个数组或者是原始对象的话就可以</span><br><span class="line">  	? JSON.stringify(val, null, 2)</span><br><span class="line">  	: String(val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将字符串转化为数字，如果转化失败，也就是 <code>NaN</code>，那么就直接返回字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function toNumber (val) &#123;</span><br><span class="line">     var n &#x3D; parseFloat(val);</span><br><span class="line">     return isNaN(n) ? val : n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把传入的字符串创建一个 map，返回一个函数可以检查 key 是否存在于map当中，第二个参数来决定是否区分大小写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function makeMap (str, expectLowercase) &#123;</span><br><span class="line">     	var map &#x3D; Object.create(null);&#x2F;&#x2F;创建一个真的空对象</span><br><span class="line">     	var list &#x3D; str.split(&#39;,&#39;);</span><br><span class="line">     	for(var i &#x3D; 0; i&lt;list.length; i++) &#123;</span><br><span class="line">         map[list[i]] &#x3D; true</span><br><span class="line">     	&#125;</span><br><span class="line">     	return expectLowercase</span><br><span class="line">     	? function (val) &#123; return map[val.toLowerCase()]&#125;</span><br><span class="line">     	: function (val) &#123; return map[val]&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>移除数组中的一项，当你不知道该项在数组中的索引的时候</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function remove (arr, item) &#123;</span><br><span class="line">  if(arr.length) &#123;</span><br><span class="line">    var index &#x3D; arr.indexOf(item);</span><br><span class="line">    if(index &gt; -1) &#123;</span><br><span class="line">      return arr.splice(index,1)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>检查一个对象是否自己有这个 属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var hasOwnProperty &#x3D; Object.prototype.hasOwnProperty;</span><br><span class="line">function hasOwn (obj, key) &#123;</span><br><span class="line">	return hasOwnProperty.call(obj,key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>返回一个函数并该函数返回一个已经缓存的字符串，也就是结果吧</p>
<ul>
<li>利用了闭包将已经计算好了的结果缓存在一个 <code>catch</code> 对象</li>
<li>在我们重复调用函数但是可能这些值我们已经计算过了，就直接返回缓存中存了的</li>
<li>在下面有些方法中会使用到</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function catched (fn) &#123;</span><br><span class="line">     var catch &#x3D; Object.create(null);</span><br><span class="line">     return (function catchedFn (str) &#123;</span><br><span class="line">       var hit &#x3D; catch[str];</span><br><span class="line">       return hit || catch[str] &#x3D; fn(str);</span><br><span class="line">     &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把用连字符分割字符串变成驼峰命名，比如   v-model&gt;vModel</p>
</li>
<li><p>将首字母变成大写</p>
</li>
<li><p>把驼峰命名字符串变成连字符链接 比如 aBc &gt; a-bc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var camelizeRE &#x3D; &#x2F;-(\w)&#x2F;g;</span><br><span class="line">var camelize &#x3D; cached(function (str) &#123;</span><br><span class="line">  return str.replace(camelizeRE, function (_, c) &#123; return c ? c.toUpperCase() : &#39;&#39;; &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var capitalize &#x3D; cached(function (str) &#123;</span><br><span class="line">  return str.charAt(0).toUpperCase() + str.slice(1)</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F;举个例子，如果我在下面</span><br><span class="line">var str &#x3D; capitalize(&#39;javascript&#39;);</span><br><span class="line">&#x2F;&#x2F;会将我传入的字符串 &#39;javascript&#39;变成&#39;Javascript&#39;</span><br><span class="line">&#x2F;&#x2F;同时由于我已经转化过一次了，将它存在缓存当中，catch也就是闭包所引用的</span><br><span class="line">var str1 &#x3D; capitalize(&#39;javascript&#39;)</span><br><span class="line">&#x2F;&#x2F;z这时候就是直接从缓存当中获取了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var hyphenateRE &#x3D; &#x2F;\B([A-Z])&#x2F;g;</span><br><span class="line">var hyphenate &#x3D; cached(function (str) &#123;</span><br><span class="line">  return str.replace(hyphenateRE, &#39;-$1&#39;).toLowerCase()</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>这是一个 <code>bind polyfill</code>,虽然大部分可以说是所有的浏览器都支持 <code>bind</code>，但是还是不排除有憨憨使用的浏览器太感人了，算是 <strong>优雅降级</strong>吧。不得不说 Vue的开发者想的太周到了，内力雄厚啊。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;绑定函数，并且改变上下文</span><br><span class="line">function polyfillBind (fn, ctx) &#123;</span><br><span class="line">     function boundFn (a) &#123;</span><br><span class="line">       var l &#x3D; arguments.length;</span><br><span class="line">       return l</span><br><span class="line">       ? l&gt;1</span><br><span class="line">         ? fn.apply(ctx,arguments)</span><br><span class="line">         : fn.call(ctx,a)</span><br><span class="line">       : fn.call(ctx)</span><br><span class="line">     &#125;</span><br><span class="line">     boundFn._length &#x3D; fn.length;</span><br><span class="line">     return boundFn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;原始的bind</span><br><span class="line">function nativeBind （fn,ctx) &#123;</span><br><span class="line">     return fn.bind(ctx);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;判断是否支持bind</span><br><span class="line">var bind &#x3D; Function.prototype.bind</span><br><span class="line">	? nativeBind</span><br><span class="line">	: polyfillBind</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>把一个类数组变成一个数组</p>
<blockquote>
<p>当然也可以使用 <code>Array.prototype.slice.call(list)</code> ，如果不需要项下面这样可能会只要部分</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function toArray (list,start) &#123;</span><br><span class="line">     start &#x3D; start || 0;</span><br><span class="line">     var i &#x3D; list.length - start;</span><br><span class="line">     var ret &#x3D; new Array(i);</span><br><span class="line">     while (i--) &#123;</span><br><span class="line">       ret[i] &#x3D; list[i+start];</span><br><span class="line">     &#125;</span><br><span class="line">     return ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把属性混入到目标属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function extend (to,_from) &#123;</span><br><span class="line">     for(var key in _from) &#123;</span><br><span class="line">       to[key] &#x3D; _from[key];</span><br><span class="line">     &#125;</span><br><span class="line">     return to</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>合并数组里面的对象到一个对象里面，是浅拷贝</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function toObject (arr) &#123;</span><br><span class="line">     var res &#x3D; &#123;&#125;;</span><br><span class="line">     for (var i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">       if(arr[i]) &#123;</span><br><span class="line">         extend(res,arr[i]);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>下面这几个函数就比较让人摸不着头脑，不知道是干什么用的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    * Perform no operation.</span><br><span class="line">    * Stubbing args to make Flow happy without leaving useless transpiled code</span><br><span class="line">    * with ...rest (https:&#x2F;&#x2F;flow.org&#x2F;blog&#x2F;2017&#x2F;05&#x2F;07&#x2F;Strict-Function-Call-Arity&#x2F;).</span><br><span class="line">    *&#x2F;</span><br><span class="line">   function noop (a, b, c) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">   &#x2F;**</span><br><span class="line">    * Always return false.</span><br><span class="line">    *&#x2F;</span><br><span class="line">   var no &#x3D; function (a, b, c) &#123; return false; &#125;;</span><br><span class="line"> </span><br><span class="line">   &#x2F;* eslint-enable no-unused-vars *&#x2F;</span><br><span class="line"> </span><br><span class="line">   &#x2F;**</span><br><span class="line">    * Return the same value.</span><br><span class="line">    *&#x2F;</span><br><span class="line">   var identity &#x3D; function (_) &#123; return _; &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成一个字符串，用 <code>,</code> 连接起来，用来连接数组对象中的 <code>stacticKeys key</code>值 ， <code>[{stacticKeys:1},{stacticKeys:2},{stacticKeys:3}]</code>变成一个字符串 <code>1,2，3</code>‘   <strong>还不知道使用来干啥的</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function genStaticKeys (module) &#123;</span><br><span class="line">     return module.reduce(function (keys, m) &#123;</span><br><span class="line">       return keys.concat(m.staticKeys || [])</span><br><span class="line">     &#125;, []).join(&#39;,&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断两个值是不是 宽松的 相等，如果是两个不同的对象，虽然引用不同，==判断也是不相等的。但是他们看起来可能会一样  比如 <code>var a = {a:&#39;a&#39;}  var b = {a:&#39;a&#39;}</code>,还比如两个数组长度相等，且每一项相等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function looseEqual (a,b) &#123;</span><br><span class="line">     if (a &#x3D;&#x3D;&#x3D; b) return true;</span><br><span class="line">     var isObjectA &#x3D; isObject(A);</span><br><span class="line">     var isObjectB &#x3D; isObject(B);</span><br><span class="line">     if(isObjectA &amp;&amp; isObjectB) &#123;</span><br><span class="line">      &#x2F;&#x2F;如果都是对象进入这一步</span><br><span class="line">      try&#123;</span><br><span class="line">        	var isArrayA &#x3D; Array.isArray(a);</span><br><span class="line">       	var isArrayB &#x3D; Array.isArray(b);</span><br><span class="line">       	if (isArrayA &amp;&amp; isArrayB) &#123;</span><br><span class="line">             &#x2F;&#x2F;两个都是数组</span><br><span class="line">             return a.length &#x3D;&#x3D;&#x3D; b.length &amp;&amp; b.every(function (e, i) &#123;</span><br><span class="line">               return looseEqual(e,a[i]);&#x2F;&#x2F;长度相同，且递归判断每一项是否相等</span><br><span class="line">             &#125;)</span><br><span class="line">       	&#125;else if (a instance of Date &amp;&amp; b instanceof Date) &#123;</span><br><span class="line">             return a.getTime() &#x3D;&#x3D;&#x3D; b.getTime()</span><br><span class="line">             &#x2F;&#x2F;还可以判断两个date对象的时间是不是相等的</span><br><span class="line">       	&#125;else if(!isArrayA &amp;&amp; !isArrayB)&#123;</span><br><span class="line">             &#x2F;&#x2F;两个都不是数组，但是是对象</span><br><span class="line">             var keysA &#x3D; Object.keys(a);</span><br><span class="line">             var keysB &#x3D; Object.keys(b);</span><br><span class="line">             return keysA.length &#x3D;&#x3D;&#x3D; keysB.length &amp;&amp; keysB.every(function (key) &#123;</span><br><span class="line">               return looseEqual(a[key],b[key]);</span><br><span class="line">               &#x2F;&#x2F;a b 的keys长度相等，递归判断两者属性是否相等</span><br><span class="line">             &#125;)</span><br><span class="line">       	&#125; else &#123;</span><br><span class="line">             return false</span><br><span class="line">       	&#125;</span><br><span class="line">      &#125; catch(e) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">       </span><br><span class="line">     &#125;else if(!isObjectA &amp;&amp; !isObjectB)&#123;</span><br><span class="line">       return String(a) &#x3D;&#x3D;&#x3D; String(b);</span><br><span class="line">     &#125;else &#123;</span><br><span class="line">       return false</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断数组中是否有一个值与传入的值相等,并返回第一个值的索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function looseIndexOf (arr,val) &#123;</span><br><span class="line">     for (var i &#x3D; 0; i&lt;arr.length; i++) &#123;</span><br><span class="line">       if(looseEqual(arr[i], val)) &#123;</span><br><span class="line">         return i;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>确保这个函数只被调用一次,闭包函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function once (fn) &#123;</span><br><span class="line">     var called &#x3D; false;</span><br><span class="line">     return function () &#123;</span><br><span class="line">       if(!called) &#123;</span><br><span class="line">         called &#x3D; true;</span><br><span class="line">         fn.apply(this, arguments)</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>下面一些都是一些标识符和配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ssr标记属性，ssr就是服务端渲染</span><br><span class="line">var SSR_ATTR &#x3D; &#39;data-server-rendered&#39;;</span><br><span class="line"> </span><br><span class="line"> 	&#x2F;&#x2F; 组件指令  定义指令 、 过滤器指令</span><br><span class="line">   var ASSET_TYPES &#x3D; [</span><br><span class="line">     &#39;component&#39;,</span><br><span class="line">     &#39;directive&#39;,</span><br><span class="line">     &#39;filter&#39;</span><br><span class="line">   ];</span><br><span class="line"> </span><br><span class="line">   var LIFECYCLE_HOOKS &#x3D; [</span><br><span class="line">     &#39;beforeCreate&#39;,	&#x2F;&#x2F;生命周期，开始实例化 vue 指令</span><br><span class="line">     &#39;created&#39;,		&#x2F;&#x2F;生命周期， 结束实例化 vue 指令</span><br><span class="line">     &#39;beforeMount&#39;,	&#x2F;&#x2F;生命周期，开始渲染虚拟 dom，挂载 event 事件 </span><br><span class="line">     &#39;mounted&#39;,		&#x2F;&#x2F;生命周期，渲染虚拟dom，挂载 event结束了 </span><br><span class="line">     &#39;beforeUpdate&#39;,	&#x2F;&#x2F;生命周期，开始更新view数据 指令</span><br><span class="line">     &#39;updated&#39;,		&#x2F;&#x2F;生命周期，结束更新view数据 指令</span><br><span class="line">     &#39;beforeDestroy&#39;,	&#x2F;&#x2F;生命周期，开始销毁 new 出来的实例</span><br><span class="line">     &#39;destroyed&#39;,		&#x2F;&#x2F;生命周期，结束销毁实例</span><br><span class="line">     &#39;activated&#39;,		&#x2F;&#x2F;keep-alive 组件激活时使用</span><br><span class="line">     &#39;deactivated&#39;,	&#x2F;&#x2F;keep-alive 组件停用时调用</span><br><span class="line">     &#39;errorCaptured&#39;,&#x2F;&#x2F; 具有此钩子的组件捕获其子组件树（不包括其自身）中的所有错误（不包括在异步回调中调用的那些）</span><br><span class="line">     &#39;serverPrefetch&#39; &#x2F;&#x2F; 暂时不清楚</span><br><span class="line">   ];</span><br><span class="line"> </span><br><span class="line">   &#x2F;*  *&#x2F;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   var config &#x3D; (&#123;</span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Option merge strategies (used in core&#x2F;util&#x2F;options)</span><br><span class="line">      *&#x2F;</span><br><span class="line">     &#x2F;&#x2F; $flow-disable-line</span><br><span class="line">     &#x2F;&#x2F;合并对象策略</span><br><span class="line">     optionMergeStrategies: Object.create(null),</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Whether to suppress warnings.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     silent: false,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Show production mode tip message on boot?</span><br><span class="line">      *&#x2F;</span><br><span class="line">     productionTip: &quot;development&quot; !&#x3D;&#x3D; &#39;production&#39;,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Whether to enable devtools</span><br><span class="line">      *&#x2F;</span><br><span class="line">     devtools: &quot;development&quot; !&#x3D;&#x3D; &#39;production&#39;,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Whether to record perf</span><br><span class="line">      *&#x2F;</span><br><span class="line">     performance: false,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Error handler for watcher errors</span><br><span class="line">      *&#x2F;</span><br><span class="line">     errorHandler: null,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Warn handler for watcher warns</span><br><span class="line">      *&#x2F;</span><br><span class="line">     warnHandler: null,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Ignore certain custom elements</span><br><span class="line">      *&#x2F;</span><br><span class="line">     ignoredElements: [],</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Custom user key aliases for v-on</span><br><span class="line">      *&#x2F;</span><br><span class="line">     &#x2F;&#x2F; $flow-disable-line</span><br><span class="line">     keyCodes: Object.create(null),</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Check if a tag is reserved so that it cannot be registered as a</span><br><span class="line">      * component. This is platform-dependent and may be overwritten.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     isReservedTag: no,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Check if an attribute is reserved so that it cannot be used as a component</span><br><span class="line">      * prop. This is platform-dependent and may be overwritten.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     isReservedAttr: no,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Check if a tag is an unknown element.</span><br><span class="line">      * Platform-dependent.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     isUnknownElement: no,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Get the namespace of an element</span><br><span class="line">      *&#x2F;</span><br><span class="line">     getTagNamespace: noop,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Parse the real tag name for the specific platform.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     parsePlatformTagName: identity,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Check if an attribute must be bound using property, e.g. value</span><br><span class="line">      * Platform-dependent.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     mustUseProp: no,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Perform updates asynchronously. Intended to be used by Vue Test Utils</span><br><span class="line">      * This will significantly reduce performance if set to false.</span><br><span class="line">      *&#x2F;</span><br><span class="line">     async: true,</span><br><span class="line"> </span><br><span class="line">     &#x2F;**</span><br><span class="line">      * Exposed for legacy reasons</span><br><span class="line">      *&#x2F;</span><br><span class="line">     _lifecycleHooks: LIFECYCLE_HOOKS</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>检查一个字符串是否以$或者_开头</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function isReserved (str) &#123;</span><br><span class="line">     var c &#x3D; (str + &#39;&#39;).charCodeAt(0);</span><br><span class="line">     return c &#x3D;&#x3D;&#x3D; 0x24 || c &#x3D;&#x3D;&#x3D; 0x5F</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义对象的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function def (obj, key, val, enumerable) &#123;</span><br><span class="line">     Object.defineProperty(obj,key,&#123;</span><br><span class="line">       value: val,</span><br><span class="line">       enumerable: !!enumerable,</span><br><span class="line">       writable: true,</span><br><span class="line">       configurable: true</span><br><span class="line">     &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配不是 数字字母下划线 $符号   开头的（正则表达式还不是很会，下次再来看）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var bailRE &#x3D; new RegExp((&quot;[^&quot; + (unicodeRegExp.source) + &quot;.$_\\d]&quot;));</span><br><span class="line">   function parsePath (path) &#123;</span><br><span class="line">     if (bailRE.test(path)) &#123;</span><br><span class="line">       return</span><br><span class="line">     &#125;</span><br><span class="line">     var segments &#x3D; path.split(&#39;.&#39;);</span><br><span class="line">     return function (obj) &#123;</span><br><span class="line">       for (var i &#x3D; 0; i &lt; segments.length; i++) &#123;</span><br><span class="line">         if (!obj) &#123; return &#125;</span><br><span class="line">         obj &#x3D; obj[segments[i]];</span><br><span class="line">       &#125;</span><br><span class="line">       return obj</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>我们能不能用 <code>__proto__</code>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var hasProto &#x3D; &#39;__proto__&#39; in &#123;&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断浏览器和设备</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var inBrowser &#x3D; typeof window !&#x3D;&#x3D; undefined 		&#x2F;&#x2F;判断是不是浏览器</span><br><span class="line">var inWeex &#x3D; typeof WXEnvironment !&#x3D;&#x3D; &#39;undefined&#39; &amp;&amp; !!WXEnvironment.platform;</span><br><span class="line">   var weexPlatform &#x3D; inWeex &amp;&amp; WXEnvironment.platform.toLowerCase();</span><br><span class="line">   var UA &#x3D; inBrowser &amp;&amp; window.navigator.userAgent.toLowerCase();</span><br><span class="line">   var isIE &#x3D; UA &amp;&amp; &#x2F;msie|trident&#x2F;.test(UA);</span><br><span class="line">   var isIE9 &#x3D; UA &amp;&amp; UA.indexOf(&#39;msie 9.0&#39;) &gt; 0;</span><br><span class="line">   var isEdge &#x3D; UA &amp;&amp; UA.indexOf(&#39;edge&#x2F;&#39;) &gt; 0;</span><br><span class="line">   var isAndroid &#x3D; (UA &amp;&amp; UA.indexOf(&#39;android&#39;) &gt; 0) || (weexPlatform &#x3D;&#x3D;&#x3D; &#39;android&#39;);</span><br><span class="line">   var isIOS &#x3D; (UA &amp;&amp; &#x2F;iphone|ipad|ipod|ios&#x2F;.test(UA)) || (weexPlatform &#x3D;&#x3D;&#x3D; &#39;ios&#39;);</span><br><span class="line">   var isChrome &#x3D; UA &amp;&amp; &#x2F;chrome\&#x2F;\d+&#x2F;.test(UA) &amp;&amp; !isEdge;</span><br><span class="line">   var isPhantomJS &#x3D; UA &amp;&amp; &#x2F;phantomjs&#x2F;.test(UA);</span><br><span class="line">   var isFF &#x3D; UA &amp;&amp; UA.match(&#x2F;firefox\&#x2F;(\d+)&#x2F;);</span><br><span class="line">   </span><br><span class="line">   &#x2F;&#x2F; Firefox has a &quot;watch&quot; function on Object.prototype...</span><br><span class="line">   var nativeWatch &#x3D; (&#123;&#125;).watch;</span><br></pre></td></tr></table></figure>
</li>
<li><p>兼容火狐浏览器的写法 （还是看不懂）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var supportsPassive &#x3D; false;</span><br><span class="line">if (inBrowser) &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    var opts &#x3D; &#123;&#125;;</span><br><span class="line">    Object.defineProperty(opts, &#39;passive&#39;, (&#123;</span><br><span class="line">      get: function get () &#123;</span><br><span class="line">        &#x2F;* istanbul ignore next *&#x2F;</span><br><span class="line">        supportsPassive &#x3D; true;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)); &#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;flow&#x2F;issues&#x2F;285</span><br><span class="line">    window.addEventListener(&#39;test-passive&#39;, null, opts);</span><br><span class="line">  &#125; catch (e) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>#####这里好像是设置服务器渲染的，也还是不太懂</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; this needs to be lazy-evaled because vue may be required before</span><br><span class="line">&#x2F;&#x2F; vue-server-renderer can set VUE_ENV</span><br><span class="line">    &#x2F;&#x2F;vue 服务器渲染 可以设置   VUE_ENV</span><br><span class="line">    var _isServer;</span><br><span class="line">&#x2F;&#x2F;判断是不是node 服务器环境</span><br><span class="line">    var isServerRendering &#x3D; function () &#123;</span><br><span class="line">        if (_isServer &#x3D;&#x3D;&#x3D; undefined) &#123;</span><br><span class="line">            &#x2F;* istanbul ignore if *&#x2F;</span><br><span class="line">            &#x2F;&#x2F;如果不是浏览器 并且global 对象存在，那么有可能是node 脚本</span><br><span class="line">            if (!inBrowser &amp;&amp; typeof global !&#x3D;&#x3D; &#39;undefined&#39;) &#123;</span><br><span class="line">                &#x2F;&#x2F;</span><br><span class="line">                &#x2F;&#x2F; detect presence of vue-server-renderer and avoid</span><br><span class="line">                &#x2F;&#x2F; Webpack shimming the process</span><br><span class="line">                &#x2F;&#x2F;_isServer 设置是服务器渲染</span><br><span class="line">                _isServer &#x3D; global[&#39;process&#39;].env.VUE_ENV &#x3D;&#x3D;&#x3D; &#39;server&#39;;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                _isServer &#x3D; false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return _isServer</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; detect devtools 检测工具</span><br><span class="line">    var devtools &#x3D; inBrowser &amp;&amp; window.__VUE_DEVTOOLS_GLOBAL_HOOK__;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断该函数是不是系统内置函数</p>
</li>
<li><p>判断是否支持 <code>Symbol</code> 数据类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function isNative (Ctor) &#123;</span><br><span class="line">    return typeof Ctor &#x3D;&#x3D;&#x3D; &#39;function&#39; &amp;&amp; &#x2F;native code&#x2F;.test(Ctor.toString())</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">    var hasSymbol &#x3D;</span><br><span class="line">    typeof Symbol !&#x3D;&#x3D; &#39;undefined&#39; &amp;&amp; isNative(Symbol) &amp;&amp;</span><br><span class="line">    typeof Reflect !&#x3D;&#x3D; &#39;undefined&#39; &amp;&amp; isNative(Reflect.ownKeys);</span><br><span class="line">    &#x2F;&#x2F; Reflect.ownKeys方法用于返回对象的所有属性，基本等同于Object.getOwnPropertyNames与Object.getOwnPropertySymbols之和。</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断是否有ES6的 <code>Set</code>数据结构，如果没有自己写一个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var _Set;</span><br><span class="line">if( typeof Set !&#x3D;&#x3D; &#39;undefined&#39; &amp;&amp; isNative(Set)) &#123;</span><br><span class="line">     _Set &#x3D; Set;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">&#x2F;&#x2F;a non-standard Set polyfill that only works with primitive keys. 非标准的</span><br><span class="line">     _Set &#x3D; (function () &#123;</span><br><span class="line">       function Set () &#123;</span><br><span class="line">         this.set &#x3D; Object.create(null);</span><br><span class="line">       &#125;</span><br><span class="line">       Set.prototype.has &#x3D; function has (key) &#123;</span><br><span class="line">         return this.set[key] &#x3D;&#x3D;&#x3D; true</span><br><span class="line">       &#125;;</span><br><span class="line">       Set.prototype.add &#x3D; function add (key) &#123;</span><br><span class="line">         this.set[key] &#x3D; true;</span><br><span class="line">       &#125;;</span><br><span class="line">       Set.prototype.clear &#x3D; function clear () &#123;</span><br><span class="line">         this.set &#x3D; Object.create(null);</span><br><span class="line">       &#125;;</span><br><span class="line">       return Set</span><br><span class="line">     &#125;)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一直到这里似乎都和<code>Vue</code> 本身没啥关系，这些都是工具函数，方便以后的使用，jQuery也有好多类似的方法。</p>
<p>​</p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-20T13:43:01.000Z">2020-01-20</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    19 分钟 读完 (大约 2910 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/20/%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8BDOM/">文档对象模型-DOM</a>
            
        </h1>
        <div class="content">
            <p>​    <code>DOM</code> （文档对象模型）是针对 HTML 和 XML 文档的一个 API（应用程序编程接口）。DOM 描</p>
<p>绘了一个层次化的节点树，允许开发人员添加、移除和修改页面的某一部分。DOM 脱胎于Netscape 及微软公司创始的 DHTML（动态 HTML），但现在它已经成为表现和操作页面标记的真正的平台、语言中立的方式。</p>
<p>​    1998 年 10 月 DOM１级规范成为 W3C 的推荐标准，为基本的文档结构及查询提供了接口。本章主<br>要讨论与浏览器中的 HTML 页面相关的 DOM1 级的特性和应用，以及 JavaScript 对 DOM1 级的实现。<br>IE、Firefox、Safari、Chrome 和 Opera 都非常完善地实现了 DOM。</p>
<blockquote>
<p>需要注意的是IE中的所有<code>DOM</code> 对象都是以COM对象的形式实现的。这意味着IE中的DOM对象与原始的<code>JavaScript</code> 对象的行为或者活动特点并不一致。</p>
</blockquote>
<h2 id="操作DOM节点"><a href="#操作DOM节点" class="headerlink" title="操作DOM节点"></a>操作DOM节点</h2><ul>
<li><p><code>appendChild（）</code> 是向 <code>childNodes</code> 列表的末尾添加一个节点，并返回新的节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var returnedNodes &#x3D; someNode.appendChild(newNode) </span><br><span class="line">   alert(returnedNodes &#x3D;&#x3D;&#x3D; newNode)			&#x2F;&#x2F;true</span><br><span class="line">   alert(someNode.lastChild &#x3D;&#x3D;&#x3D; newNode)	&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<p>如果传入的节点已经存在于被传入的对象中了，那么会将该对象放到 <code>childNodes</code> 的末尾。这样我们可以把第一个子节点传入 <code>appendChild</code> 中，从而将第一个节点放到末尾。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var returnedNode &#x3D; someNode.appendChild(someNode.firstChild)</span><br><span class="line">alert(returnedNode &#x3D;&#x3D;&#x3D; someNode.lastChild)		&#x2F;&#x2F;true</span><br><span class="line">alert(returnedNode &#x3D;&#x3D;&#x3D; someNode.first)			&#x2F;&#x2F;false</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果想要把节点放到对象 <code>childNodes</code> 列表的某个特定位置，而不是像 <code>appendChild</code> 一样只能放到末尾，那么我们可以使用 <code>insertBefore()</code> 方法。这个方法接收 <strong>两个参数</strong> ：要插入的节点和作为参照的节点。插入节点时会变成被参照节点的一个同胞节点（即<code>previousSibling</code>），同返回时被插入的节点 。如果第二个参数为 <code>null</code> ，那就相当于执行了 <code>appendChild()</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;被参照的节点为 null</span><br><span class="line">var returnedNode &#x3D; someNode.insertBefore(newNode,null)</span><br><span class="line">alert(newNode &#x3D;&#x3D;&#x3D; someNode.lastNode)		&#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;将节点插入到第一个节点</span><br><span class="line">var returnedNode &#x3D; someNode.insertBefore(newNode,someNode.firstChild)</span><br><span class="line">alert(returnedNode &#x3D;&#x3D;&#x3D; newNode) 			&#x2F;&#x2F;true</span><br><span class="line">alert(newNode &#x3D;&#x3D;&#x3D; someNode.firstNode)		&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<p>虽然有 <code>insertBefore()</code> 但是没有 <code>insertAfter()</code>,其实有没有都无所谓，用一个就可以实现了。</p>
</li>
<li><p>前面两个方法都是插入节点，下面这个方法 <code>replaceChild</code> 可以移除节点，该方法接收两个<strong>参数</strong>： 要插入的节点和要替换的节点，要替换的节点将有这个方法返回并从文档树中移除，同时由要插入的节点代替。直接看下面的例子吧：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 替换第一个节点</span><br><span class="line">var returnedNode &#x3D; someNode.replaceChild(newNode,someNode.firstChild)</span><br><span class="line">alert(newNode &#x3D;&#x3D;&#x3D; someNode.firstChild )			&#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;替换第n个节点</span><br><span class="line">someNode.replaceChild(newNode,someNode.childNodes[n])</span><br><span class="line">someNode.replaceChild(newNode,someNode.childNodes.item(n))</span><br></pre></td></tr></table></figure>

<p>使用 <code>replaceCHild()</code> 插入一个节点后，被替换的节点的所有关系指针都会被新插入的节点所复制，从技术上来看我们还是可以访问的到这个被替换的节点，但是这个节点已经脱离了文档，可以理解<strong>为文档游离碎片</strong>。</p>
</li>
<li><p>如果只想移除节点而非替换，可以使用 <code>removeChild()</code> 。这个方法只接受一个参数，不用想都知道就是我们需要移除的节点，并且返回被移除的节点。直接看代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;移除最后一个节点</span><br><span class="line">var removedNode &#x3D; someNode.replaceChild(someNode.lastNode)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;移除节点本身</span><br><span class="line">childNode.pare</span><br></pre></td></tr></table></figure>

<p>和上面替换方法一样，被移除的节点还是存在于文档，但是在文档当中没了一席之位，也算是<strong>文档游离碎片</strong>。</p>
</li>
</ul>
<p>前面介绍的四个方法操作的都是某个节点的子节点，也就是说使用这些方法必须先获取到 父节点，但是并不是所有节点都有子节点，如果在不支持子节点的节点使用这些方法会报错。下面两种方法是所有节点都有的</p>
<ul>
<li><p><code>cloneNode()</code>方法的作用是复制节点， 该方法接收一个布尔值参数，表示是否执行深拷贝。复制后返回的节点归文档所有，但此时并没有父节点。使用如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;html</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">	&lt;li&gt;item 1&lt;&#x2F;li&gt;</span><br><span class="line">	&lt;li&gt;item 1&lt;&#x2F;li&gt;</span><br><span class="line">	&lt;li&gt;item 1&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br><span class="line"></span><br><span class="line">var deepList &#x3D; myList.cloneNode(true)</span><br><span class="line">allert(deepList.childNodes.length)		&#x2F;&#x2F;3(IE &lt; 9) or 7(other browers)</span><br><span class="line"></span><br><span class="line">var shallowList &#x3D; myList.cloneNode(false)</span><br><span class="line">allert(shallowList.childNodes.length)		&#x2F;&#x2F;0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>cloneNode() 不会复制 添加到DOM节点的 JavaScript 属性，例如时间处理程序。这个方法只复制特性、在明确指明第一个参数true的情况下会复制所有子节点，其他一切都不会复制。IE在此存在一个bug，即他会复制事件处理程序，在我们复制前最好移除事件处理程序。</p>
</blockquote>
</li>
<li><p>最后一个方法是 <code>normalize()</code> ，该方法的唯一作用是处理文档树中的文本节点。由于解析器的实现或者DOM操作等原因，可能会出现文本节点不包含文本或者连续出现两个文本节点的情况。在一个节点调用此方法后，会在该节点的子节点上进行查找。如果发现了空节点则删除；如果找到了相邻的文本节点则将他们合并成一个节点。</p>
</li>
</ul>
<h2 id="Document-类型"><a href="#Document-类型" class="headerlink" title="Document 类型"></a>Document 类型</h2><p>​    <code>JavaScript</code>通过  <code>Document</code>  类型表示文档。在浏览器中，document 对象是 HTMLDocument(继承自Document类型) 的一个实例。即 <code>document.__prototype__ === HTMLDocumentt.prototype</code> 。表示整个HTML页面。而且 <code>document</code> 对象是 <code>window</code> 对象的一个属性，可以作为全局变量来访问。 Document节点具有以下特点：</p>
<ul>
<li><code>nodeType</code>的值为9</li>
<li><code>nodeName</code> 的值为“#document”</li>
<li><code>nodeValue</code> 的值为 null</li>
<li><code>parentNode</code> 的值为null</li>
<li><code>ownerDocument</code>的值为null</li>
<li>其子节点可能是一个DocumentType（最多是一个）、<code>Element</code> （最多一个）、<code>ProcessingInstruction</code>或 <code>Comment</code></li>
</ul>
<p><code>document</code> 对象提供了两个方法快捷访问其子节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var html &#x3D; document.documentElement</span><br><span class="line">alert(html &#x3D;&#x3D;&#x3D; document.childNodes[0])			&#x2F;&#x2F;true</span><br><span class="line">alert(html &#x3D;&#x3D;&#x3D; document.firstChild)				&#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">var body &#x3D; document.body</span><br><span class="line">&#x2F;&#x2F;这个方法是平时开发比较常见的</span><br></pre></td></tr></table></figure>

<p>还有一个方法是获取到<code>DocumentType</code> 的，通常将 &lt;!DOCTYPE&gt;标签看做一个与文档其他部分不同的实体，可以通过doctype属性访问到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var doctype &#x3D; document.doctype</span><br><span class="line">&#x2F;&#x2F;获得对&lt;!DOCTYPE&gt;的引用</span><br></pre></td></tr></table></figure>



<h4 id="文档类型"><a href="#文档类型" class="headerlink" title="文档类型"></a>文档类型</h4><p>​    作为 <code>HTMLDocument</code> 的一个实例， <code>document</code> 对象还有一些 标准的 <code>Document</code> 对象所没有的属性。这些属性提供了 document 对象所表现的网页的一些信息。其中第一个属性是 <code>title</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;取得文档标题</span><br><span class="line">var originTitle &#x3D; document.title</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;修改文档标题</span><br><span class="line">document.title &#x3D; &quot;A new title&quot;</span><br></pre></td></tr></table></figure>

<p>​    下面三个属性都是对网页的请求有关，他们是 <code>URL</code>、 <code>domain</code> 、 <code>referrer</code>。 URL 属性包含页面完整的URL，domain属性只包含页面的域名，而 referrer则保存了链接到当前页面的那个页面的URL，即由哪个页面跳转过来的。在没有来源页面的情况下，referrer属性可能会包含空字符串。</p>
<p>​    所有这些信息都会存在于请求的 <code>HTTP</code> 头部，只不过是通过这些属性让我们可以在 JavaScript 中访问到而已，来看下面的例子。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;取得完整的URL</span><br><span class="line">var url &#x3D; document.URL</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;取得域名</span><br><span class="line">var domain &#x3D; document.domain</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;取得来源页面的URL</span><br><span class="line">var referrer &#x3D; document.referrer</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在这三个属性当中只有 domain是可以设置的，但是出于安全考虑也不是可以设置成任何值。如果URL中包含一个子域名，例如 p2p.wrox.com，那么就只能将domain设置成“”wrox.com“。不能将domain设置为URL不包含的域</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;假设页面来自 &quot;p2p.wrox.com&quot;</span><br><span class="line">document.domain &#x3D; &quot;wrox.com&quot;		&#x2F;&#x2F;OK</span><br><span class="line">document.domian &#x3D; &quot;baidu.com&quot;		&#x2F;&#x2F;报错</span><br></pre></td></tr></table></figure>

<p>​    <code>document.domain</code> 的设置还有一个限制，如果域名一开始是松散的（loose），那么就不能在设置为紧绷的（tight）。如下面例子所示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;假设页面来自 &quot;p2p.wrox.com&quot;</span><br><span class="line">document.domain &#x3D; &quot;wrox.com&quot;		&#x2F;&#x2F;这是可以的</span><br><span class="line">document.domian &#x3D; &quot;p2p.wrox.com&quot;	&#x2F;&#x2F;不能再往下加子域名</span><br></pre></td></tr></table></figure>

<h4 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h4><ul>
<li><p><code>document.getElementById()</code>这个方法就不多说了，返回与传入参数匹配的元素，没找到则返回null。需要注意的是在IE7及以下的版本对参数是不区分大小写的，还有如果有表元素的name属性和要查找的元素id相同，且表单元素在前面，那就完蛋了，你可能就获取不到你想要查找的元素了。</p>
</li>
<li><p><code>document.getElementsByTagName()</code>返回一个HTMLCollection ，和nodeList很相似有一点不同的是访问<code>HTMLCollection</code> 时除了通过索引和 <code>item()</code>方法之外 ，还支持 <code>namedItem()</code>,可以快速通过名字定位到我们想要的元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src&#x3D;&quot;xxx.jpg&quot; name&#x3D;&quot;myImg&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">var imgs &#x3D; document.getElementsByTagName(&#39;img&#39;)</span><br><span class="line">var myImg &#x3D; imgs.namedItem(&#39;myImg&#39;)</span><br><span class="line">&#x2F;&#x2F;还可通过下面的形式</span><br><span class="line">var myImg &#x3D; imgs[&#39;myImg&#39;]  		&#x2F;&#x2F;最终会调用 namedItem()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>虽然说标准规定标签名需要区分大小写，但是为了最大限度地与既有的HTML页面兼容，穿给 gelElementsByTagNma() 是可以不区分大小写的。但是对于XML包括XHTML来说是需要区分大小写的。</p>
</blockquote>
</li>
</ul>
<p>关于查找元素就先介绍到这里。</p>
<h2 id="Element类型"><a href="#Element类型" class="headerlink" title="Element类型"></a>Element类型</h2><p>​    除了 <code>Document</code> 类型之外， <code>Element</code> 类型要算是最常用的类型了。具有以下特点：</p>
<ul>
<li><p><code>nodeType</code> 的值为1</p>
</li>
<li><p><code>nodeName</code> 的值为元素的标签名</p>
</li>
<li><p><code>nodeValue</code> 的值为null</p>
</li>
<li><p><code>parentNode</code>可能是Document或者Element</p>
</li>
<li><p>其子节点可能是Element、Text、ProcessingInstruction、、CDATASection 或</p>
<p>EntityReference。</p>
</li>
</ul>
<p>要访问元素的标签名，可以使用 nodeName 属性，也可以使用 tagName 属性；这两个属性会返回</p>
<p>相同的值（使用后者主要是为了清晰起见）。以下面的元素为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;myDiv&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">var div &#x3D; document.getElementById(&#39;myDIv&#39;)</span><br><span class="line">alert(div.tagName)	&#x2F;&#x2F;&#39;DIV&#39;</span><br><span class="line">alert(div.tagName &#x3D;&#x3D;&#x3D; div.nodeName)		&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<h4 id="1-HTML元素"><a href="#1-HTML元素" class="headerlink" title="1. HTML元素"></a>1. HTML元素</h4><p>​    所有HTML元素都有 <code>HTMLElement</code> 类型表示，不是直接通过这个类型，而是子类型。 <code>HTMLElement</code>类型也是继承了Element并添加了一些属性。 添加的这些属性分别相应于每个HTML元素都存在下列标准特性：</p>
<ul>
<li><code>id</code>, 元素在文档中的唯一标识符</li>
<li><code>title</code> ，有关元素的附加说明信息，一般通过工具提示条显示出来。</li>
<li><code>lang</code> ，元素内容的语言代码，很少使用</li>
<li><code>dir</code> ，语言的方向，值为”ltr“（left to right），或者”rlt”,也很少使用</li>
<li><code>className</code> 与元素的class对应，即为元素指定CSS类。</li>
</ul>
<h5 id="获取特性"><a href="#获取特性" class="headerlink" title="获取特性"></a>获取特性</h5><ul>
<li><code>getAttribute()</code></li>
<li><code>setAttribute()</code></li>
<li><code>removeAttribute()</code></li>
</ul>
<blockquote>
<p>需要注意的是getAttribute()    传入的特性名应该与实际的特性名相同，所以想要获取到class的话需要‘class’，而非‘className’，而且还可以获取自定义属性（即标准HTML语言当中没有的特性）</p>
</blockquote>
<p>任何元素的所有特性都可以通过DOM元素本身的属性来访问，当然 HTMLElement也会有5个属性与相应的特性意义对应。不过只有公认的特性（非自定义）才会添加到DOM对象中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;myDiv&quot; align&#x3D;&quot;left&quot; myAttribute&#x3D;&quot;hello&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">alert(div.id)		&#x2F;&#x2F;&quot;myDiv&quot;</span><br><span class="line">alert(div.align)	&#x2F;&#x2F;&quot;left&quot;</span><br><span class="line">alert(div.myAttribute)	&#x2F;&#x2F;undefined(IE除外)</span><br></pre></td></tr></table></figure>

<p>​    </p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-16T06:01:10.000Z">2020-01-16</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    31 分钟 读完 (大约 4603 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/16/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1-BOM/">浏览器对象-BOM</a>
            
        </h1>
        <div class="content">
            <h1 id="浏览器对象-BOM"><a href="#浏览器对象-BOM" class="headerlink" title="浏览器对象-BOM"></a>浏览器对象-BOM</h1><p>​    如果说，<code>ECMAScript</code>  是 JavaScript的核心，那么想要在浏览器中使用JavaScript，BOM无疑才是真正的核心BOM提供了很多对象供浏览器使用，这些都与页面内容无关， 下面是<strong>BOM</strong>主要内容</p>
<ul>
<li>理解window对象——BOM的核心</li>
<li>控制窗口、框架和弹出窗口</li>
<li>利用 <code>location</code> 对象中的页面信息</li>
<li>使用 <code>navigator</code> 对象了解浏览器</li>
</ul>
<h2 id="1-window对象"><a href="#1-window对象" class="headerlink" title="1 window对象"></a>1 window对象</h2><p>​    BOM的核心是 window，他表示一个浏览器实例。在浏览器当中，window对象有双重角色，它既是通过 <code>JavaScript</code> 访问浏览器的一个接口，有是 <code>ECMAScript</code> 规定的Global对象，这意味着在网页中定义的任何一个对象，变量，函数都可以以window对象作为Global访问</p>
<h3 id="1-1-全局作用域"><a href="#1-1-全局作用域" class="headerlink" title="1.1  全局作用域"></a>1.1  全局作用域</h3><p>​    所有在全局作用域中声明的变量、函数，最后都会变成<code>window</code> 对象的属性和方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D; 12;</span><br><span class="line">function fn1 () &#123;</span><br><span class="line">     alert(this.a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(window.a)   	&#x2F;&#x2F;12</span><br><span class="line">window.fn1()		&#x2F;&#x2F;12</span><br><span class="line">fn1()				&#x2F;&#x2F;12</span><br></pre></td></tr></table></figure>

<p>​    很明显我们在全局作用域定义的变量和函数最后都会归于<code>window</code> 对象下。于是可以通过window.a和window.fn1()来访问和调用在全局作用域下定义的变量 a和函数 fn1，但是在全局作用域下定义变量与在 window对象下直接定义属性还是有那么一点点区别的。</p>
<p>​    全局变量下定义的变量不能通过 <code>delete</code> 操作符删除，而在 <code>window</code> 下直接定义的属性可以。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var age &#x3D; 22;</span><br><span class="line">window.color &#x3D; &#39;red&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;在IE&lt;9 时抛出错误，在其他所有浏览器都返回 false</span><br><span class="line">delete window.age</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;在IE&lt;9 时抛出错误，在其他所有浏览器都返回 true</span><br><span class="line">delete window.color</span><br><span class="line"></span><br><span class="line">alert(window.age)  	&#x2F;&#x2F;22</span><br><span class="line">alert(window.color)	&#x2F;&#x2F;undefined</span><br></pre></td></tr></table></figure>

<p>​    这是因为我们使用 <code>var</code> 语句声明的 age 属性在<code>window</code> 中有一个属性名为 <code>[[Configurable]]</code>的特性，这个特性的值被设置为了<code>false</code>，因此这样直接在全局定义的属性是不可以通过 <code>delete</code>  操作符删除掉，IE8及以下不管属性是怎么创建的都会抛出错误。IE问题真的是多</p>
<h3 id="1-2-窗口关系及框架"><a href="#1-2-窗口关系及框架" class="headerlink" title="1.2 窗口关系及框架"></a>1.2 窗口关系及框架</h3><p>​    如果一个页面中包含框架，则每个框架都有一个自己的window对象，并且保存在 <code>frames</code>集合中。在 frames集合中可以通过索引访问相应的 window对象，每个window对象都有一个name属性，其中包含了框架的名称。</p>
<p>​    top对象始终指向最外层框架，也就是浏览器。与top对象对应的是<code>parent</code> 对象，顾名思义，parent对象始终指向当前框架的直接上层框架。在某些情况下 parent有可能等于top；但在没有框架的时候，parent一定等于top，这个应该很好理解。</p>
<h3 id="1-3-窗口位置"><a href="#1-3-窗口位置" class="headerlink" title="1.3 窗口位置"></a>1.3 窗口位置</h3><p>​    <code>screenLeft、screenTop</code> 或者 <code>screenX、screenY</code>返回的是窗口相对于屏幕左边和上边的位置。浏览器窗口紧贴屏幕最上方的时候，<code>screenTop</code>或者 <code>screenY</code> ，Firefox、Chrome、Safari返回的是浏览器工具栏也就是整个浏览器窗口相对于屏幕上方的位置也就是0；而不是像IE和Opera一样返回的是页面可见区域相对屏幕上方的精确距离。</p>
<p>​    更特别的一点是 ，Firefox、Chrome、Safari始终返回的是每个页面框架的 top.screenLeft和screenTop的值，就算框架设置了外边距的情况返回的值也是相同的。而IE和Opera则会返回框架相对于屏幕精确的值。</p>
<p>​    虽然我们可以使用 <code>moveTo</code> 和 <code>moveBy</code> 两个函数将窗口移到一个精确地值，这两个方法都接收两个参数，一个是新位置的x和y的坐标，一个是在水平和垂直方向上移动的距离。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.moveTo(0,0)		&#x2F;&#x2F;将窗口移到左上角</span><br><span class="line"></span><br><span class="line">window.moveBy(200,300)	&#x2F;&#x2F;将窗口水平移动200px，垂直移动300px</span><br></pre></td></tr></table></figure>

<p>​    需要注意的是这个两个方法都有可能被浏览器禁用了，在Opera和IE&gt;7默认就是禁用的。</p>
<h3 id="1-3-窗口的大小"><a href="#1-3-窗口的大小" class="headerlink" title="1.3 窗口的大小"></a>1.3 窗口的大小</h3><p>​    跨浏览器确认一个窗口的大小可不是一件简单的事。IE9+，Firefox、Safari、Opera和Chrome均提供了四个属性： <code>innerWidth   innerHeight  outWidth和 outHeight</code> 。在不同浏览器有不同的标准，这里就不细说了。</p>
<p>​    虽然无法确认浏览器本身窗口大小，但是却可以获得页面视口大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var pageHeight &#x3D; window.innerHeight,</span><br><span class="line">	pageWidth &#x3D; window.innerWidth</span><br><span class="line">	</span><br><span class="line">	if(typeof pageWidth !&#x3D; &#39;number&#39;) &#123;</span><br><span class="line">         	if(document.compatModel) &#123;</span><br><span class="line">             pageWidth &#x3D; document.documentElement.clientWidth;</span><br><span class="line">             pageHeight &#x3D; document.documentElement.clientHeight;</span><br><span class="line">         	&#125;else&#123;</span><br><span class="line">             pageWidth &#x3D; document.body.clientWidth;</span><br><span class="line">             pageHeight &#x3D; document.body.clientHeight</span><br><span class="line">         	&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>​    先检查 pageWidth 和 pageHeight是不是数值，如果不是的话，则通过检查 <code>document.compatModel</code> 来确认页面是否处于标准模式，如果是则使用 <code>document.documentElement.clientWidth</code> ；否则使用 <code>document.body.clientWidth</code>。 对于移动设备window.innerHeight始终保存着可见视口区域的大小。移动IE不支持这个，但是可以通过 <code>document.documentElement.clientHeight</code> 提供相同的信息。随着页面的缩放这些信息也会改变。</p>
<p>​    和移动窗口的两个方法 <code>moveTo moveBy</code> 类似的两个方法0 <code>resizeTo  resizeBy</code>，这两个方法可以调整浏览器的大小。但是同样也可能会被浏览器禁用。</p>
<h3 id="1-4-导航和打开窗口"><a href="#1-4-导航和打开窗口" class="headerlink" title="1.4 导航和打开窗口"></a>1.4 导航和打开窗口</h3><p>​    使用 <code>window.open()</code> 可以导航到一个窗口也可以打开一个窗口这个方法可以接收四个参数值：要加载的URL、窗口目标、一个特性字符串以及一个表示新页面是否取代浏览器历史记录中当前加载页面的布尔值。通常只需要传递第一个值，最后一个值只在不打开新窗口的情况下使用。</p>
<p>​    如果为 <code>window.open()</code> 传递了第二个参数，而且参数是已有窗口或框架名称，那么就会在具有该名称的窗口或框架下加载 第一个参数指定的 URL。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;等同于  &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&quot; target&#x3D;&quot;topFrame&quot;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">window.open(&quot;http:&#x2F;&#x2F;www.baidu.com&quot;,&quot;topFrame&quot;)</span><br></pre></td></tr></table></figure>

<p>​        如果有一个名叫“topFrame” 的窗口或框架就会在该窗口下加载URL；否则就会创建一个新的窗口并将其命名为“topFrame”。此外第二个参数也可以是下列任何一个特殊的窗口名称：</p>
<ul>
<li>_self</li>
<li>-parent</li>
<li>_top</li>
<li>_blank</li>
</ul>
<h4 id="弹出一个窗口"><a href="#弹出一个窗口" class="headerlink" title="弹出一个窗口"></a>弹出一个窗口</h4><p>​    如果 <code>window.open()</code> 第二个参数并不是一个以及存在窗口或者框架，那么该方法就会根据第三个参数 传入的字符串创建一个新窗口或标签页。如果没有传入第三个参数，浏览器就只好自己根据默认配置（工具栏、地址栏、状态栏）打开一个新的窗口或者标签页（根据浏览器设置）。在不打开新窗口的时候回忽略第三个参数。</p>
<p>下面是第三个参数的配置说明：</p>
<ul>
<li><code>fullscreen</code> 可以去yes或者no，表示是否最大化，仅限IE</li>
<li><code>height</code> 表示高度。不能小于100</li>
<li><code>left</code> 数值，表示到左边的距离。不能是负值</li>
<li><code>location</code> yes或者no，表示是否在浏览器窗口显示地址栏。不同浏览器的默认值不同。如果设置为no，地址栏有可能会被隐藏也有可能会被禁用。（取决于不同浏览器）</li>
<li><code>menubar</code> yes或no 表示是否在浏览器窗口显示菜单栏。默认值为no</li>
<li><code>resizable</code> yes或no  表示是否可以拖动浏览器框来改变窗口大小，默认为no</li>
<li><code>scrollbar</code> yes或no 表示如果内容在视口显示不下，是否允许滚动。默认值为 no</li>
<li><code>status</code> yes或no  表示是否在浏览器窗口显示状态栏。 默认值为no</li>
<li><code>toolbar</code> yes或no  表示是否在浏览器窗口显示工具栏。 默认值为no </li>
<li><code>top</code> 同样不能为负值 </li>
<li><code>width</code>  同样不能小于100</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var myBaidu &#x3D;  window.open(&quot;http:&#x2F;&#x2F;www.baidu.com&quot;,&quot;myBaidu&quot;,</span><br><span class="line">&quot;height&#x3D;400,width&#x3D;400,top&#x3D;20,left&#x3D;20,resizable&#x3D;no&quot;)</span><br><span class="line"></span><br><span class="line">myBaidu.close() 	&#x2F;&#x2F;可以在打开窗口的地方关闭，但也只能是打开的关闭被打开的</span><br><span class="line">alert(myBaidu.closed) &#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">   alert(myBaidu.opener &#x3D;&#x3D;&#x3D; window)	&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>



<h2 id="2-location对象"><a href="#2-location对象" class="headerlink" title="2. location对象"></a>2. location对象</h2><p><code>location</code> 对象是最有用的 <code>BOM</code> 对象之一，它提供了当前窗口加载文档有关的信息，还提供了一些导航功能。location既是document的对象也是window的对象；换句话说 document.locatation和window.location引用的是同一个对象。下表列出了 <code>location</code> 对象的所有属性。（省略了 每个属性前面的location前缀）</p>
<ul>
<li><code>hash</code> “#contents” 返回URL中的hash（#后面跟零或多个字符），不包含散列则返回空字符串</li>
<li><code>host</code> ”wxww.xxx.com：8080“ 返回服务器名和端口号（如果有的话）</li>
<li><code>hostname</code> “wxww.xxx.com” 返回不带端口号的服务器名</li>
<li><code>href</code> “httxp://wxww.xxx.com:80” 返回当前加载页面完整的URL，等于location.toString()的返回值</li>
<li><code>pathname</code> “/static/img” 返回URL中的目录和文件名</li>
<li><code>port</code> 如果有的话返回端口号，没有的话则返回空字符串</li>
<li><code>protocol</code> “http:” 返回页面使用的协议。通常都是http或https</li>
<li><code>search</code> “？q=1235” 返回URL的查询字符串，通常都是以？开头</li>
</ul>
<h3 id="2-1-查询字符串search"><a href="#2-1-查询字符串search" class="headerlink" title="2.1 查询字符串search"></a>2.1 查询字符串search</h3><p>location.search返回的是一个以？开头的查询字符串，如果有多个查询参数的话还会用&amp;连接，但我们却不方便直接访问每个查询字符的参数。可以自己写一个函数以便解析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function getQueryObj () &#123;</span><br><span class="line">     	&#x2F;&#x2F;取得查询字符串并去掉开头的？</span><br><span class="line">     	var qs &#x3D; location.search?location.search.substring(1):&quot;&quot;;</span><br><span class="line">     	var obj &#x3D; &#123;&#125;;</span><br><span class="line">     	let items &#x3D; qs.length ? qs.spilt(&quot;&amp;&quot;) : [];</span><br><span class="line">     	</span><br><span class="line">     	items.forEach( function (item) &#123;</span><br><span class="line">     		&#x2F;&#x2F;在这里取到的字符串很有可能是被编码过的</span><br><span class="line">       	let name &#x3D; decodeURLCoponent(item.split(&quot;&#x3D;&quot;)[0]);</span><br><span class="line">           let value &#x3D; decodeURLCoponent(item.split(&quot;&#x3D;&quot;)[1]);</span><br><span class="line">           obj[name] &#x3D; value;</span><br><span class="line">     	&#125; );</span><br><span class="line">     	return obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-位置操作"><a href="#2-2-位置操作" class="headerlink" title="2.2 位置操作"></a>2.2 位置操作</h3><p>使用location对象可以改变浏览器位置，<code>location.assign(url)</code>可以打开新的URL并在浏览器的历史记录中添加一条新的记录。如果是直接将location的href的值设置为了别的也会调用 <code>assign（）</code> 方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;这几种写法是等价的</span><br><span class="line">window.location &#x3D; &#39;www.xxx.baidu.com&#39;</span><br><span class="line">document.location &#x3D; &#39;www.baidu.com&#39;</span><br><span class="line">location.assign(&#39;www.baidu.com&#39;)</span><br></pre></td></tr></table></figure>

<p>​    在IE8、Firefox1、Safari2+，Opera9+和Chrome中，修改hash的值会在浏览器的历史记录中添加一条新的记录，在IE早期版本， <code>hash</code> 属性不会在用户单击‘后退’或者‘前进’ 按钮时被更新，而只会在用户点击了包含hash的URL时才会更新。</p>
<p>​    当通过上述任何一种方式修改URL之后浏览器都会生成一条新的历史记录，因此用户点击按钮“后退”都会导航到前面一个页面。要禁用这种行为可以使用 <code>replace</code> 方法。这个方法只接受一个参数，即要导航去的URL；结果虽然会导致浏览的位置发生改变，但是不会再历史记录中生成新的记录。再调用 <code>replace（）</code> 方法之后，用户不能再回到之前的页面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location.replace(&#39;www.baidu.com&#39;)</span><br><span class="line">&#x2F;&#x2F;用户是无法通过点返回的</span><br></pre></td></tr></table></figure>

<p>与位置有关的最后一个方法是reload(),作用是重新加载页面。如果调用reload()时不传入任何参数，页面就会以最有效的方式重新加载。也就是说如果页面上次请求以来没有发生过改变，页面就会从浏览器缓存中重新加载。如果要强制从服务器重新加载，则可以在参数中传入一个true</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location.reload() 		&#x2F;&#x2F;重新加载（有可能从缓存中加载）</span><br><span class="line">location.reload(true) 	&#x2F;&#x2F;重新加载（从服务器重新加载）</span><br></pre></td></tr></table></figure>

<h2 id="3-navigator对象"><a href="#3-navigator对象" class="headerlink" title="3. navigator对象"></a>3. navigator对象</h2><p>​    最早由 <code>Netscape2.0</code>引入 navigator对象，现在已经成为识别客户端浏览器的事实标准。</p>
<h3 id="3-1-插件检测"><a href="#3-1-插件检测" class="headerlink" title="3.1 插件检测"></a>3.1 插件检测</h3><pre><code>检测浏览器中是否安装了特定的插件是一种最常见的检测流程。对于IE浏览器，可以使用plugins数组来达到这个目的。该数组的每一项都包含下列属性。</code></pre><ul>
<li><code>name</code> :插件的名称。</li>
<li><code>description</code> ：插件的描述</li>
<li><code>filename</code> ：插件的文件名。</li>
<li><code>length</code> ：插件所处理的<code>MIME</code> 类型数量</li>
</ul>
<p>​     一般来说，name属性中会包含检测插件必须的所有信息，但是有的时候也不全是如此。在检测插件是需要像下面这样循环迭代每一个插件名并将name和给定的插件名进行对比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;插件检测（在IE中无效）</span><br><span class="line">function hasPlugin (name) &#123;</span><br><span class="line">     name &#x3D; name.toLowerCase();</span><br><span class="line">     for(let i &#x3D; 0; i &lt; navigator.plugins.length; i++) &#123;</span><br><span class="line">       if(navigator.plugins[i].name.toLowerCase.indexOf(name) &gt; -1)&#123;</span><br><span class="line">          return true</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(hasPlugin(&quot;flash&quot;))</span><br></pre></td></tr></table></figure>



<h2 id="4-screen对象"><a href="#4-screen对象" class="headerlink" title="4. screen对象"></a>4. screen对象</h2><p>​    JavaScript有几个对象在编程中用处不大，而<code>screen</code>  对象就是其中之一。screen对象基本上就是用来表示客户端能力，其中包含浏览器窗口外部的显示器信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.resizeTo(window.availWidth,window.availHeight)</span><br></pre></td></tr></table></figure>

<p>​    但是大部分浏览器都会默认禁用 调整浏览器大小的能力，所以上面的代码很可能没有效果</p>
<h2 id="5-history-对象"><a href="#5-history-对象" class="headerlink" title="5. history 对象"></a>5. history 对象</h2><p>​    <code>history</code> 对象保存着用户上网的历史记录，从窗口被打开的那一刻起。因为history是window对象的属性，因此每个浏览器窗口、每个标签乃至每个框架，都有自己特定的history对象与特定的window对象关联。出于安全考虑，开发人员无法获得用户已经浏览过的URL。不过借用用户访问过的列表，同样可以在不知道URL的情况下前进后退。</p>
<p>​    使用 <code>go（）</code> 方法可以再用户的历史记录中任意跳转，这个方法接收一个参数值，即向前跳转或者先后跳转的整数值，正数表示向前跳转，负数表示向后跳转。类似于浏览器的前进后退。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">history.go(1) 		&#x2F;&#x2F;前进一页</span><br><span class="line">history.go(-2)		&#x2F;&#x2F;后退两页</span><br></pre></td></tr></table></figure>

<p>​    也可以给 <code>go()</code>方法传入一个字符串参数，此时浏览器会跳转到历史记录中包含这个字符串最近的一个位置，有可能前进也有可能后退。如果历史记录中不包含这个字符串，那么就会什么都不做。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">history.go(&#39;baidu.com&#39;)</span><br><span class="line">&#x2F;&#x2F;跳转到最近的&#39;baidu.com&#39;</span><br></pre></td></tr></table></figure>

<p>​    另外还可以用两个简写的方法back()和foward()来代替go()。顾名思义可以前进后退，可读性更强点。</p>
<p>​    除了上述几个方法之外history还有一个length属性，保存着历史记录的数量。这个数量包括所有的历史记录，即所有的向前和向后的记录。对于加载到窗口、标签页或者框架的第一个页面而言，history的length为0。可以像下面这样检查用户是否一开始就打开了你的页面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(history.length &#x3D;&#x3D; 0)&#123;</span><br><span class="line">	dosomething</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    虽然 <code>history</code> 并不常用，但是在创建自定义前进后退按钮，以及检测当前页面是不是用户历史记录中的第一个页面还是非常有用的。</p>
<blockquote>
<p>当页面URL改变时，就会生成一条历史记录。在IE8+、Opera、FIrefox以及Safari3+和Chrome中，这里所说的改变包括URL中的hash值的变化（因此设置location.hash会在上述这些浏览器生成一条新的历史记录）</p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>浏览器对象模型（BOM）以window对象以依托，表示浏览器可视窗口以及页面可是区域。同时window对象还是 <code>ECMAScript</code> 中的Global对象，因而所有全局变量核函数都是他的属性，并且所有的原生构造函数以及其他函数也都存在与他的命名空间。本文讨论了下列BOM组成:</p>
<ul>
<li>在使用框架时，每个框架都有自己的window对象以及所有原生构造函数及其他函数的副本。每个框架都保存在frames集合中，可以通过位置或名字来访问。</li>
<li>有一些窗口指针可以用来引用其他框架，包括父框架</li>
<li>top对象始终指向最外围的框架，也就是整个浏览器的窗口。</li>
<li>使用 <code>location</code> 对象可以通过编程方式来访问浏览器的导航系统。设置响应的属性，可以逐段或者整体修改浏览器的URL</li>
<li>调用 <code>replace()</code> 方法可以导航到一个新的URL，同时该URL会替换历史记录中当前显示的页面，就是意味着不会修改历史记录</li>
<li><code>navigator</code> 对象提供了与浏览器相关的信息。到底提供了哪些信息很大一部分上取决于浏览器；不过也有一些大家都有的属性（如userAgen）存在于所有的浏览器当中</li>
</ul>
<p>​    BOM中还有两个对象：screen和history，但他们的功能有限。screen对象中保存着与客户端显示器有关的信息，这些信息一般都只用于站点分析。<code>history</code> 对象为开发者访问浏览器历史记录提供了一个小间隙，开发人员可以根据这个判断历史记录的数量，也可以在历史记录中前后任意跳转。</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-14T07:13:13.000Z">2020-01-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    38 分钟 读完 (大约 5774 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/14/ES5%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84/">ES5中的数组</a>
            
        </h1>
        <div class="content">
            <h1 id="Array类型"><a href="#Array类型" class="headerlink" title="Array类型"></a>Array类型</h1><p>　　除了Object之外，Array类型恐怕是ECMAScript中最常用的类型了。而且，ECMAScript中的数组与其他多数语言中的数组有着相当大的区别。虽然ECMAScript数组与其他语言中的数组都是数据的有序列表，但与其他语言不同的是，ECMAScript中数组的每一项可以保存任何类型的数据。也就是说，可以用数组的第一个位置来保存字符串，第二位置来保存数值，用第三个位置来保存对象。以此类推。而且，ECMAScript数组的大小是可以动态调整的，既可以随着数据的添加自动增长以容纳新增数据。</p>
<p>　　创建数组的基本方式有两种。第一种是使用Array 构造函数,如下面的代码所示:<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var colors &#x3D; new Array();</span><br><span class="line">var colors &#x3D; new Array(20);</span><br><span class="line">var colors &#x3D; new Array(&quot;red&quot;,&quot;blue&quot;,&quot;black&quot;);</span><br></pre></td></tr></table></figure>

<p>   另外在使用Array构造函数时也可以省略new操作符。如下面乐子所示，省略new操作符的结果相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var colors &#x3D; Array(3);</span><br></pre></td></tr></table></figure>



<p>创建数组的第二种基本方式是使用数组字面量表示法。数组字面量是由一堆包含数组项的方括号表示，多个数组之间以逗号隔开，如下所示：<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var color&#x3D;[&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];</span><br><span class="line">var name&#x3D;[];			&#x2F;&#x2F;创建一个空数组</span><br><span class="line">var values&#x3D;[1,2,3,];	&#x2F;&#x2F;不要这样！这样会创建一个包含2或3项的数组</span><br><span class="line">var potions &#x3D; [,,,,]	&#x2F;&#x2F;不要这样！这样会创建一个包含5或6项的数组</span><br><span class="line"></span><br><span class="line">alert(colors.length);  	&#x2F;&#x2F;3</span><br><span class="line">alert(name.length);		&#x2F;&#x2F;0</span><br></pre></td></tr></table></figure>

<p>   数组的length属性很有特性————他不是只读的。因此，通过设置这个属性，可以从数组末尾移除项或向数组中添加新项。请看下面的例子：<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">colors.length&#x3D;2;</span><br><span class="line">alert(colors[2]); 	&#x2F;&#x2F;undefined</span><br><span class="line">colors.length&#x3D;3;</span><br><span class="line">alert(colors[2]); 	&#x2F;&#x2F;同样也会是undefined</span><br></pre></td></tr></table></figure>

<p>   利用length属性也可以方便地在数组末尾添加新项，如下所示：<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var colors  &#x3D; [&quot;red&quot;,&quot;blue&quot;,&quot;white&quot;];</span><br><span class="line">colors[colors.length]&#x3D;&quot;balck&quot;;		&#x2F;&#x2F;在位置3添加一个新的颜色  “black”</span><br><span class="line">colors[colors.length] &#x3D; &quot;brown&quot;; 	&#x2F;&#x2F;在位置4添加一个新的颜色  “brown”</span><br><span class="line"></span><br><span class="line">colors[99] &#x3D; &quot;green&quot;;</span><br><span class="line">alert(colros.length);		&#x2F;&#x2F;数组的长度变成了100 因为在位置99添加了一个颜色</span><br><span class="line">alert(colors[66]);			&#x2F;&#x2F;undefined  因为位置3到98都是不存在的  所以返回undefined</span><br></pre></td></tr></table></figure>

<h2 id="检测数组"><a href="#检测数组" class="headerlink" title="检测数组"></a>检测数组</h2><p>  自从ECMAScript3做出规定以后，就出现了确定某个对象是不是数组的经典问题。对于一个网页，或者一个全局作用域而言，使用 instanceof操作符就能得到满意的结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(value instanceof Array)&#123;</span><br><span class="line">	&#x2F;&#x2F;对数组执行某些操作</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>   instanceof操作符的问题在于，他假定只有一个全局执行环境。如果网页中包含多个框架，那实际上就存在两个以上不同的全局执行环境，从而存在两个以上不同版本的Array构造函数。如果你从一个框架向另一个框架中传入一个数组，name闯入的数组与在第二个框架中原生创建的数组分别具有各自不同的函数。</p>
<p>为了解决这个问题，ECMAScript5新增了Array.isArray（）方法。这个方法的目的是最终确定某个值到底是不是数组，而不管他是在哪个全局执行环境中创建的。这个方法的用用法如下。<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if（Array.isArray(value)）&#123;</span><br><span class="line">	&#x2F;&#x2F;对数组执行某些操作	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="转化方法"><a href="#转化方法" class="headerlink" title="转化方法"></a>转化方法</h3><p>如前所述，所有对象都具有toLocaleString(),toString()和valueOf（）方法。其中，调用valueOf（）返回的还是数组本身，而调用数组的toString（）方法会返回由数组中每个值的字符串形式拼接而成的一个以逗号分隔的字符串。实际上，为了创建这个字符串会调用数组每一项的toString（）方法。来看下面这个例子。<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var colors  &#x3D; [&quot;red&quot;,&quot;blue&quot;,&quot;white&quot;];</span><br><span class="line">alert(colors.toString());		&#x2F;&#x2F;red,blue,white</span><br><span class="line">alert(colors.valueOf());		&#x2F;&#x2F;red,blue,white</span><br><span class="line">alert(colors);					&#x2F;&#x2F;red,blue,white  由于alert（）要接受字符串参数，所以他会在后台调用toString（）方法</span><br></pre></td></tr></table></figure>

<p>  另外toLocaleString()方法也会经常返回与toString（）和valueOf（）方法相同的值，但也不总是如此。当调用数组toLocaleString（）方法时，她也会创建一个数组值得以逗号分隔的字符串。而与前两个方法唯一的不同之处在于，这一次为了取得每一项的值，调用的是每一项的toLocaleString（）方法，而不是toString（）方法。请看下面这个例子；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var person1&#x3D;&#123;</span><br><span class="line">    toLocaleString:function()&#123;</span><br><span class="line">        return &quot;wang&quot;;</span><br><span class="line">    &#125;,</span><br><span class="line">    toString:function () &#123;</span><br><span class="line">        return &quot;wang&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var person2&#x3D;&#123;</span><br><span class="line">    toLocaleString :function() &#123;</span><br><span class="line">        return &quot;junping&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    toString:function()&#123;</span><br><span class="line">        return &quot;jun&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var people&#x3D;[person1,person2];</span><br><span class="line">alert(people);              &#x2F;&#x2F;wang,jun</span><br><span class="line">alert(people.toString());   &#x2F;&#x2F;wang,jun</span><br><span class="line">alert(people.toLocaleString());&#x2F;&#x2F;wang,junping</span><br></pre></td></tr></table></figure>

<p>数组继承的toLocaleString（），toString（）和valueOf（）方法，在默认的情况下都会以逗号分隔的字符串的形式返回数组项。而如果使用join（）方法，则可以使用不同的分隔符来构建这个字符串。join（）方法只接收一个参数，即用做分隔符的字符串，然后返回所包含所有数组项的<br>字符串。请看下面的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var colors  &#x3D;[&quot;red&quot;,&quot;blue&quot;,&quot;white&quot;];</span><br><span class="line">alert(colors.join(&quot;!&quot;));</span><br><span class="line">alert(colors.join(&quot;,&quot;));</span><br></pre></td></tr></table></figure>

<p><strong>如果数组中的某一项是null或者undefined，name该值在join（），toLocaleString（），toString（）和valueOf（）方法返回的结果以空字符串表示。</strong></p>
<h2 id="栈方法"><a href="#栈方法" class="headerlink" title="栈方法"></a>栈方法</h2><p>   push（）方法可以接收任意数量的参数，把他们逐个添加到数组末尾，并返回修改后数组的长度。而pop（）方法则从数组末尾移除最后一项，减少数组的length值，然后返回移除的项。请看下面的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var colors&#x3D;new Array()；</span><br><span class="line">var count&#x3D;colors.push(&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;);</span><br><span class="line">alert(count)		&#x2F;&#x2F;3    因为push（）会修改并返回最后的数组长度</span><br><span class="line"></span><br><span class="line">count &#x3D; colors.push(&quot;black&quot;);</span><br><span class="line">alert(count);		&#x2F;&#x2F;4</span><br><span class="line"></span><br><span class="line">var item &#x3D; colors.pop;		&#x2F;&#x2F;取得最后一项</span><br><span class="line">alert(item)				&#x2F;&#x2F;&quot;black&quot;</span><br><span class="line">alert(colors.length);		&#x2F;&#x2F;3</span><br></pre></td></tr></table></figure>

<p><strong>可以将栈方法与其他数组方法连用，向下面这个例子一样：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var colors&#x3D;[&quot;red&quot;,&quot;blue&quot;];</span><br><span class="line">colors.push(&quot;brown&quot;);			&#x2F;&#x2F;添加一项</span><br><span class="line">colors[3]&#x3D;&quot;black&quot;;				&#x2F;&#x2F;添加第四项</span><br><span class="line">alert(colors.length)			&#x2F;&#x2F;4</span><br><span class="line"></span><br><span class="line">var item&#x3D;colors.pop();</span><br><span class="line">alert(item,colors.length);		&#x2F;&#x2F;&quot;black&quot;,3</span><br></pre></td></tr></table></figure>



<h2 id="队列方法"><a href="#队列方法" class="headerlink" title="队列方法"></a>队列方法</h2><p>栈数据结构的访问规则是LIFO（后进先出），而队数据结构的访问规则是FIFO（First-in-First-out，先进先出）。队列在列表末端添加，从列表的前端移除项。由于push（）就是在数组末端添加项，<strong>因此要模拟队列只需要数组前端取得项的方法。</strong>实现这一操作的数组方法就是shift（），它能够移除数组中的第一个项并返回该项，同时将属于组长度减1.结合使用shift（）方法和push（）方法，可以像使用队列一样使用数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var colors&#x3D;new Array()；</span><br><span class="line">var count&#x3D;colors.push(&quot;red&quot;,&quot;green&quot;);</span><br><span class="line">alert(count);				&#x2F;&#x2F;2</span><br><span class="line"></span><br><span class="line">count &#x3D; colors.push(&quot;black&quot;);</span><br><span class="line">alert(count);			&#x2F;&#x2F;3</span><br><span class="line"></span><br><span class="line">var item &#x3D; colors.shift();</span><br><span class="line">alert(item);			&#x2F;&#x2F;&quot;red&quot;  取得第一项并返回</span><br><span class="line">alert(colors.length);		&#x2F;&#x2F;2</span><br></pre></td></tr></table></figure>

<p><strong>还有一个unshift（）方法。顾名思义，和shift（）方法的作用相反：他能在数组的前端添加一个项并返回新数组的长度。因此使用unshift（）方法和pop（）方法可以从相反的方向模拟队列</strong></p>
<h2 id="重排序方法"><a href="#重排序方法" class="headerlink" title="重排序方法"></a>重排序方法</h2><p>数组中以及存在两个可以直接用来重排序的方法：reverse（）和sort（）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var values&#x3D;[1,2,3,4,5];</span><br><span class="line">values.reverse();</span><br><span class="line"></span><br><span class="line">alert(values);			&#x2F;&#x2F;5,4,3,2,1</span><br></pre></td></tr></table></figure>

<p>这个0排列数组项————即最小的值在前面，依此到最大。<br><strong>为了实现排序，sort（）方法会调用每一个数0方法比较的也是字符串，如下所示：</strong>000</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#96;var values&#x3D;[0,2,8,10,15];</span><br><span class="line">values.sort();</span><br><span class="line">alert(values);		&#x2F;&#x2F;0,1,10,15,5</span><br></pre></td></tr></table></figure>

<p><strong>但是你也看到了，如果我们想给数字排序的话，他会先把数字转化成字符串进行比较，就不会得到我们想要的从小到大的结果了</strong></p>
<h4 id="因此sort（）方法可以接收一个比较函数作为参数，以便我们指定哪个值位于哪个值的前面"><a href="#因此sort（）方法可以接收一个比较函数作为参数，以便我们指定哪个值位于哪个值的前面" class="headerlink" title="因此sort（）方法可以接收一个比较函数作为参数，以便我们指定哪个值位于哪个值的前面"></a>因此sort（）方法可以接收一个比较函数作为参数，以便我们指定哪个值位于哪个值的前面</h4><p>比较函数接收两个参数，如果第一个参数应该位于第二个之前则返回一个负数，如果两个参数相等则返回0，如果第一个参数应该位于第二个之后则返回一个正数。一下就是一个简单的比较函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function compare(value1,value2)&#123;</span><br><span class="line">    if(value1&lt;value2)&#123;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;else if(value1&gt;value2)&#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>   这个比较函数可以适用于大多数的数据类型，只要将其作为参数传递给sort（）方法即可，如下面这个例子所示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var values&#x3D;[0,1,2,5,10,15,25,1020];</span><br><span class="line">values.sort();</span><br><span class="line">console.log(values);		&#x2F;&#x2F;0,1,1020,15,2,25,5</span><br><span class="line">values.sort(compare);</span><br><span class="line">console.log(values);</span><br></pre></td></tr></table></figure>

<p>   当然也可以通过比较函数产生降序排列的结果，只要交换函数返回的值就可以</p>
<p><strong>当然如果你想反转数原来的顺序，使用reverse（）方法要更快一些</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare2</span>(<span class="params">value1,value2</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(value1&lt;value2)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(value1&gt;value2)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    values.sort(compare2);</span><br><span class="line">    <span class="built_in">console</span>.log(values);        <span class="comment">//1020, 25, 15, 10, 5, 2, 1, 0</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>reverse()和sort()方法的返回值都是经过排序之后的数组</p>
</blockquote>
<p>   对于数值类型或者其他valueOf（）会返回数值类型的对象类型，可以使用一个更简单的比较函数。这个函数只要用第二个值减第一个值即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function compare（value1,value2）&#123;</span><br><span class="line">	return value2 - value1;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> slice()方法  它能够基于当前数组中的一或多个项创建一个新数组。slice（）方法可以接收一个<br> 或两个参数，即要返回项的起始和结束位置。在只有一个参数得到情况下，slice（）方法返回从该参数指定位置开始<br> 到当前数组末尾的所有项。如果有两个参数，该方法返回其实和结束为止之间的项————但不包括结束位置的项。</p>
<p>注意，slice（）方法不会影响原数组。请看下面例子：<br>​        </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;slice()方法&quot;);</span><br><span class="line">   var color&#x3D;[&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;black&quot;,&quot;white&quot;];</span><br><span class="line">   var color1&#x3D;color.slice(1);</span><br><span class="line">   var color2&#x3D;color.slice(1,4);</span><br><span class="line"></span><br><span class="line">   console.log(color1);</span><br><span class="line">   console.log(color2);</span><br></pre></td></tr></table></figure>

<p> 如果slice（）方法的參數中有一個是負數，则用数组的长度再加上参数来确定相应的为止<br> 比如在一个包含5项的数组上调用slice（-2，-1）与嗲用slice（3,4）得到的结果相同</p>
<h2 id="下面我们来介绍splice（）方法，介个方法恐怕要算是最强大的数组方法了，他有很多种用法。splice（）的主要用途是想数组的中部插入项，但使用这种方法的方式则有如下3种"><a href="#下面我们来介绍splice（）方法，介个方法恐怕要算是最强大的数组方法了，他有很多种用法。splice（）的主要用途是想数组的中部插入项，但使用这种方法的方式则有如下3种" class="headerlink" title="下面我们来介绍splice（）方法，介个方法恐怕要算是最强大的数组方法了，他有很多种用法。splice（）的主要用途是想数组的中部插入项，但使用这种方法的方式则有如下3种"></a>下面我们来介绍splice（）方法，介个方法恐怕要算是最强大的数组方法了，他有很多种用法。splice（）的主要用途是想数组的中部插入项，但使用这种方法的方式则有如下3种</h2><ol>
<li><strong>删除</strong>：可以删除任意数量的项，只需要指定2个参数：要删除的第一项的位置和要删除的项数</li>
</ol>
<p>例如：splice(0,2)会删除数组中的前两项。</p>
<p>2.<strong>插入</strong>：可以向指定位置插入任意数量的项，只需要提供三个参数：起始位置，0（要删除的项数）和要插入的项。如果要插0</p>
<p>例如：splice（2,0，”red”,”green”）会从当前数组的位置2开始插入字符串”red“和”green“。</p>
<p>3.<strong>替换</strong> ：可以向指定位置插入任意数量的项，且同时删除任意数量的项，只需要指定3个参数：其实位置，要删除的项数和要插入的任意数量的项。插入的项数不必与删除的项数相等。例如：</p>
<p>splice（2,1,”red”,”green”）会删除当前数组位置2的项，然后再从位置2开始插入字符串“red”和“green”。</p>
<p><strong>splice()方法始终都会返回一个数组，该数组中包含从原始数组中删除的项（如果没有删除任何项，则返回一个空数组）。</strong></p>
<p>下面代码展示了上述3中方法使用splice（）方法的方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;splice()方法&quot;)</span><br><span class="line">   var peoples&#x3D;[&quot;wang&quot;,&quot;tom&quot;,&quot;cat&quot;];</span><br><span class="line">   var removed&#x3D;peoples.splice(0,1);        &#x2F;&#x2F;删除了第一项</span><br><span class="line">   &#x2F;&#x2F; alert(peoples);</span><br><span class="line">   console.log(peoples);                   &#x2F;&#x2F;tom,cat  因为第一项被删除了</span><br><span class="line">   console.log(removed);                   &#x2F;&#x2F;wang      返回的数组只包含一项</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">removed&#x3D; peoples.splice(1,0,&quot;java&quot;,&quot;python&quot;);   </span><br><span class="line">console.log(peoples);                   &#x2F;&#x2F;[&quot;tom&quot;, &quot;java&quot;, &quot;python&quot;, &quot;cat&quot;]</span><br><span class="line">console.log(removed);                   &#x2F;&#x2F;返回的是一个空数组  因为没有删除</span><br><span class="line"></span><br><span class="line">removed&#x3D;peoples.splice(1,1,&quot;c++&quot;,&quot;js&quot;);</span><br><span class="line">console.log(peoples);                   &#x2F;&#x2F;[&quot;tom&quot;, &quot;c++&quot;, &quot;js&quot;, &quot;python&quot;, &quot;cat&quot;]</span><br><span class="line">console.log(removed);                   &#x2F;&#x2F;[&quot;java&quot;]  这个 bitch</span><br></pre></td></tr></table></figure>

<h2 id="位置方法-indexOf（）-lastIndexOf（）"><a href="#位置方法-indexOf（）-lastIndexOf（）" class="headerlink" title="位置方法        indexOf（）,lastIndexOf（）"></a>位置方法        indexOf（）,lastIndexOf（）</h2><p>不和你多bb了  直接看例子吧  打字好累啊  手都酸了</p>
<p> indexOf（）  lastIndexOf()<br> 两个参数：要查找的项和（可选的）表示查找起点位置的索引。</p>
<p>   <strong>这两个方法都返回要查找的项在数组中的位置，或者没有找到的情况下返回-1.</strong><br>​        </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;位置方法  &quot;)</span><br><span class="line">   var numbers  &#x3D; [0,1,2,3,5,8,2,1,5];</span><br><span class="line"></span><br><span class="line">   console.log(numbers.indexOf(2));</span><br><span class="line">   console.log(numbers.lastIndexOf(8));</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   console.log(numbers.indexOf(2,3));</span><br><span class="line">   console.log(numbers.lastIndexOf(8,6));</span><br><span class="line"></span><br><span class="line">   var person&#x3D;&#123;name:&quot;wang&quot;&#125;;</span><br><span class="line">   var people&#x3D;[&#123;name:&quot;wang&quot;&#125;];</span><br><span class="line"></span><br><span class="line">   var morePeople&#x3D;[people,&quot;jun&quot;];</span><br><span class="line"></span><br><span class="line">**我这里就不明白了  people和morePeople有什么区别**</span><br><span class="line"></span><br><span class="line">   console.log(people.indexOf(person));        &#x2F;&#x2F;-1</span><br><span class="line">   console.log(morePeople.indexOf(person));    &#x2F;&#x2F;0</span><br></pre></td></tr></table></figure>

<p><strong>这里还是不不明白</strong></p>
<h2 id="迭代方法"><a href="#迭代方法" class="headerlink" title="迭代方法"></a>迭代方法</h2><p>ECAMScript5为数组定义了5个迭代方法。每个方法都接收两个参数：要在每一项上运行的函数和（可选的）运行该函数的作用于对象————影响this的值。传入这些方法中的函数会接收三个参数：数组项的值，该项在数组中的位置和数组对象本身。根据使用的方法不同，这个函数执行后的返回值可能会也可能不会影响方法的返回值。以下是这5个迭代方法：</p>
<ol>
<li><strong>every（）：</strong>对数组中的每一项运行给定函数，如果该函数对每一项都返回true，则返回true。</li>
<li><strong>filter（）：</strong>对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组。</li>
<li><strong>forEach（）：</strong>对数组中的每一项运行给定函数。这个方法没有返回值。</li>
<li><strong>map（）：</strong>对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。</li>
<li><strong>some（）：</strong>对数组中的每一项运行给定函数，如果该函数对一项返回true，则返回true</li>
</ol>
<blockquote>
<p>在这些方法中，最相似的是every（）和some（）方法，他们都用于查询数组中的项是否满足某个条件。对every（）来说，传入的函数必须对每一项都返回true，这个方法才会返回true；否则，它就返回false。而some（）方法则是只要传入的函数对数组中的某一项返回true，就会返回true。请看下面的的例子：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var numbers&#x3D;[1,2,3,4,5,4,3,2,1];</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var everyResult &#x3D; numbers.every(function(item,index,array)&#123;</span><br><span class="line">    return item&gt;2;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">alert(everyResult);			&#x2F;&#x2F;false   因为只有部分项符合条件</span><br><span class="line"></span><br><span class="line">var someResult&#x3D;numbers.some(function(item,index,array)&#123;</span><br><span class="line">    return item&gt;2;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">alert(someResult);			&#x2F;&#x2F;true	只要至少有一个符合就会返回true</span><br></pre></td></tr></table></figure>

<p><strong>下面来看看     filter（）方法：</strong>它利用指定的函数确定是否在返回的数组中包含某一项。例如：要返回一个所有数值都大于2的数组，可以使用如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var numbers&#x3D;[1,2,3,4,5,4,3,2,1];</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var filterResult  &#x3D; numbers.filter(function(item,index,array)&#123;</span><br><span class="line">         return (item&gt;2);</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">     alert(filterResult);        &#x2F;&#x2F;3,4,5,4,3</span><br></pre></td></tr></table></figure>

<p><strong>map（）方法也返回一个数组，而这个数组的每一项都是在原始数组中的对象上运行传入函数的结果。</strong></p>
<p>例如，可以给书中的每一项乘以2，然后返回这些乘积组成的数组，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var numbers&#x3D;[1,2,3,4,5,4,3,2,1];</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var mapResult &#x3D; numbers.map(function(item,index,array)&#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    return (item*2);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">alert(mapResult);           &#x2F;&#x2F;2,4,6,8,10,8,6,4,2</span><br></pre></td></tr></table></figure>

<p><strong>最后一个是forEach（）方法，</strong>它只是对数组中的每一项运行传入的函数。这个方法并没有返回值，本质上与使用for循环迭代数组一样。来看一个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var numbers&#x3D;[1,2,3,4,5,4,3,2,1];</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numbers.forEach(function(item,index,array)&#123;</span><br><span class="line">          &#x2F;&#x2F;执行某些操作</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>



<blockquote>
<p>这些数组方法通过执行不同的操作，可以大大方便处理数组的任务。支持这些迭代方法的浏览器有<br>IE9、FireFox2+、Safari 3+、Opera 9.5+和Chrome</p>
</blockquote>
<h2 id="归并方法"><a href="#归并方法" class="headerlink" title="归并方法"></a>归并方法</h2><p>使用reduce（）方法可以执行求数组中所有值之和得到操作，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var values&#x3D;[1,2,3,4,5]</span><br><span class="line">var sum&#x3D;values.reduce(function(prev,cur,index,array)&#123;</span><br><span class="line">	return prev+cur</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">alert(sum);			&#x2F;&#x2F;15</span><br></pre></td></tr></table></figure>

<blockquote>
<p>第一次执行函数，prev是1，cur是2.第二次，prev是3（1+2的结果），cur是3（数组的第三项）。以此类推，最后返回结果</p>
</blockquote>
<p><strong>reduceRight()方法的作用类似，只不过方向相反而已。来看下面这个例子</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var values&#x3D;[1,2,3,4,5]</span><br><span class="line">var sum&#x3D;values.reduceRight(function(prev,cur,index,array)&#123;</span><br><span class="line">	return prev+cur</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">alert(sum);			&#x2F;&#x2F;15</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用reduce（）还是reduceRight()取决于从哪头开始遍历数组。除此之外，他们完全相同</p>
</blockquote>
<h2 id="Date类型"><a href="#Date类型" class="headerlink" title="Date类型"></a>Date类型</h2><p>   ECMAScript中的Date类型是在早期Java中的java.util.Date类型基础上构建的。为此Date类型使用UTC（国际协调时间）1970年1月1日午夜（零时）开始经过的毫秒来保存日期。在使用这种数据储存格式的条件下，Date类型保存的日期能够精确到1970年1月1日之前或之后的100000000年。</p>
<p><strong>要创建一个日期对象，使用new操作符和Date构造函数即可，如下所示。</strong><br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var now &#x3D; new Date();</span><br><span class="line">console.log(now);</span><br></pre></td></tr></table></figure>

<p>Date有两个方法：Date.parse()和Date.UTC()&gt;<br>其中，Date.parse()方法接收一个表示日期的字符串参数，然后尝试根据这个字符串返回相应日期的毫秒数。ECMA-262没有定义Date.parse()应该支持哪种日期格式，因此这个方法的行为因实现而异。将地区设置为美国的浏览器通常都接收下列日期格式：</p>
<ol>
<li><strong>“月/日/年”，如 6/13/2004</strong><br>2.** “英文月名，日，年”，如January 12，2004；**</li>
</ol>
<p>3.** “英文星期几 英文月名 日 年 时：分：秒 时区”，如Tue 25 2004 00:00:00 GMT-0700.**</p>
<p>4.<strong>ISO 8601 拓展格式 YYYY-MM-DDTHH：mm：ss：sssZ（例如 2004-05-25T00:00:00:00）。只有兼容ECMAScript5的实现支持这种格式。</strong></p>
<p>例如，要为2004年 5月25日创建一个日期对象，可以使用下面的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var someDate &#x3D; new Date(Date.parse(&quot;May 25,2004&quot;));</span><br></pre></td></tr></table></figure>

<p>如果传入的Date.parse()方法的字符串不能表示日期，那么他会返回NaN。实际上，如果直接将表示日期的字符串传递给Date构造函数，也会在后台调用Date.parse（）。换句话说，下面的代码与前面的例子是等价的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var someDate &#x3D; new Date(&quot;May 25,2004&quot;);</span><br></pre></td></tr></table></figure>

<p>这行代码将会得到与前面相同的日期格式</p>
<h5 id="Date-UTC（）方法同样也返回表示日期的毫秒数，但它与Date-parse（）在构建时使用不同的信息。Date-UTC（）得到参数分别是年份，基于0的月份（0开始，一月是0），月中的哪一天（1-31），小时数（0-23），分钟，秒以及毫秒数。在这些参数中，只有前两个参数（年和月）是必须的。如果没有提供月中的天数，则假设天数为1；如果省略其他参数，则统统为0-一下是两个使用Date，UTC（）方法的例子："><a href="#Date-UTC（）方法同样也返回表示日期的毫秒数，但它与Date-parse（）在构建时使用不同的信息。Date-UTC（）得到参数分别是年份，基于0的月份（0开始，一月是0），月中的哪一天（1-31），小时数（0-23），分钟，秒以及毫秒数。在这些参数中，只有前两个参数（年和月）是必须的。如果没有提供月中的天数，则假设天数为1；如果省略其他参数，则统统为0-一下是两个使用Date，UTC（）方法的例子：" class="headerlink" title="Date.UTC（）方法同样也返回表示日期的毫秒数，但它与Date.parse（）在构建时使用不同的信息。Date.UTC（）得到参数分别是年份，基于0的月份（0开始，一月是0），月中的哪一天（1-31），小时数（0-23），分钟，秒以及毫秒数。在这些参数中，只有前两个参数（年和月）是必须的。如果没有提供月中的天数，则假设天数为1；如果省略其他参数，则统统为0.一下是两个使用Date，UTC（）方法的例子："></a>Date.UTC（）方法同样也返回表示日期的毫秒数，但它与Date.parse（）在构建时使用不同的信息。Date.UTC（）得到参数分别是年份，基于0的月份（0开始，一月是0），月中的哪一天（1-31），小时数（0-23），分钟，秒以及毫秒数。在这些参数中，只有前两个参数（年和月）是必须的。如果没有提供月中的天数，则假设天数为1；如果省略其他参数，则统统为0.一下是两个使用Date，UTC（）方法的例子：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;GMT时间2000年1月1日午夜零点</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var y2k &#x3D; new Date(Date.UTC(2000,0));</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;GMT时间2005年5月5日下午5:55:55</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var allFives &#x3D; new Date(Date.UTC(2005,4,5,17,55,55));</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;也可以重写</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;GMT时间2000年1月1日午夜零点</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var y2k &#x3D; new Date(2000,0);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;GMT时间2005年5月5日下午5:55:55</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var allFives &#x3D; new Date(2005,4,5,17,55,55);</span><br></pre></td></tr></table></figure>



<p><strong>ECMAScript5中添加了Date.now（）方，返回表示调用这个方法时的日期和事件的毫秒数。这个方法简化了使用Date对象分析代码的工作。例如：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;取得开始时间</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   var start &#x3D;Date.now(); </span><br><span class="line">   function doSomething()&#123;</span><br><span class="line">       for(var i&#x3D;0;i&lt;100;i++)&#123;</span><br><span class="line">           console.log(&quot;hello world!&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;;</span><br><span class="line">   doSomething();</span><br><span class="line">&#x2F;&#x2F;取得结束时间</span><br><span class="line">   var stop &#x3D; Date.now();</span><br><span class="line">   var result &#x3D; stop - start;</span><br><span class="line">   console.log(&quot;调用这个函数输出 hello world！ 花了：&quot;+result+&quot;豪秒&quot;);</span><br></pre></td></tr></table></figure>

<p>​    </p>
<h3 id="支持Date-now（）方法的浏览器包括IE9-，Firefox3-，Safari3-，Opera10-5和Chrome。在不支持他的浏览器中，使用-操作符获取Date对象的时间戳，也可以达到同样的目的。"><a href="#支持Date-now（）方法的浏览器包括IE9-，Firefox3-，Safari3-，Opera10-5和Chrome。在不支持他的浏览器中，使用-操作符获取Date对象的时间戳，也可以达到同样的目的。" class="headerlink" title="支持Date.now（）方法的浏览器包括IE9+，Firefox3+，Safari3+，Opera10.5和Chrome。在不支持他的浏览器中，使用+操作符获取Date对象的时间戳，也可以达到同样的目的。"></a>支持Date.now（）方法的浏览器包括IE9+，Firefox3+，Safari3+，Opera10.5和Chrome。在不支持他的浏览器中，使用+操作符获取Date对象的时间戳，也可以达到同样的目的。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;取得开始时间</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var start &#x3D;+new Date();</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;调用函数</span><br><span class="line">doSomethin();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;取得停止时间</span><br><span class="line"></span><br><span class="line">var stop&#x3D; +new Date();</span><br><span class="line">result  &#x3D; stop - start;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Date类型也重写了toLocaleString和toString（）和valueOf（）方法；前两种方法在不同的浏览器中返回的日期和事件格式可谓大相径庭。事实上，toLOcaleString和toString方法的差别尽在调试代码比较有用，而在现实日期和时间没有什么价值。<br>至于Date类型的valueOf（）方法，则根本不返回字符串，而是返回日期的毫秒表示。因此，可以方便使用比较操作符（大于或者小于）来比较日期值。请看下面的例子。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var date1 &#x3D; new Date(2007,0,1);</span><br><span class="line">var date2 &#x3D; new Date(2007,1,1);</span><br><span class="line"></span><br><span class="line">console.log(date1&lt;date2); &#x2F;&#x2F;   true</span><br><span class="line">console.log(date1&gt;date2); &#x2F;&#x2F;   false</span><br></pre></td></tr></table></figure>



<h3 id="日期格式化的方法"><a href="#日期格式化的方法" class="headerlink" title="日期格式化的方法"></a>日期格式化的方法</h3><p>Date类型还有一些专门用于将日期格式化为字符串的方法，这些方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var time&#x3D;date1.toDateString();       &#x2F;&#x2F;用于特定的格式显示 星期几、月、日和年</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(time);				&#x2F;&#x2F;Mon Jan 01 2007</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time&#x3D;date1.toTimeString();       &#x2F;&#x2F;以特定于实现的格式显示 时、分、秒和时区</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(time);            	&#x2F;&#x2F;00:00:00 GMT+0800 (中国标准时间)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time&#x3D;date1.toLocaleDateString(); &#x2F;&#x2F;以特定于地区的格式显示星期几、月、日和年</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(time);            	&#x2F;&#x2F;2007&#x2F;1&#x2F;1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time&#x3D;date1.toLocaleTimeString(); &#x2F;&#x2F;以特定于实现的格式显示 时、分、秒</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(time);            	&#x2F;&#x2F;上午12:00:00</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time&#x3D;date1.toUTCString();        &#x2F;&#x2F;以特定于实现的格式完整的UTC日期</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(time);            	&#x2F;&#x2F;Sun, 31 Dec 2006 16:00:00 GMT</span><br></pre></td></tr></table></figure>



<p>与toLocaleString（）和toString（）方法一样，以上这些字符串格式方法的输出也是因浏览器而异的，因此没有哪一个方法能够用来在用户界面显示一致的日期时间。</p>
<blockquote>
<p><strong>除了前面介绍的方法之外，还有一个名叫toGMTString（）的方法，这是一个与toUTCString（）等价的方法，其存在目的在于确保向后兼容。不过，ECMAScript推荐现在编写代码一律用toUTCString（）方法。</strong></p>
</blockquote>
<h4 id="日期-时间组件方法"><a href="#日期-时间组件方法" class="headerlink" title="日期/时间组件方法"></a>日期/时间组件方法</h4><hr>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-14T06:29:21.000Z">2020-01-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1643 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/14/CSS%E4%B8%96%E7%95%8C-%E6%B8%A9%E5%92%8C%E7%9A%84padding/">CSS世界-温和的padding</a>
            
        </h1>
        <div class="content">
            <h1 id="CSS世界-温和的padding"><a href="#CSS世界-温和的padding" class="headerlink" title="CSS世界-温和的padding"></a>CSS世界-温和的padding</h1><p>​    在CSS世界的元素中，之所以说 <code>padding</code> 是性格温和的，是因为我们在使用<code>padding</code>  的时候很少会出现我们意想不到的情况，基本上就是我们想要的样子，就给人一种 <code>padding</code> 不怎么会发脾气一样，很好相处，也愿意使用。</p>
<h2 id="1-padding-和元素尺寸的关系"><a href="#1-padding-和元素尺寸的关系" class="headerlink" title="1. padding 和元素尺寸的关系"></a>1. padding 和元素尺寸的关系</h2><p>​    除了 <code>IE</code> 有<code>怪异盒模型</code> 之外，大部分浏览器<code>CSS</code> 中默认的 <code>box-sizing</code> 是 <code>content-box</code> ，所以使用<code>padding</code> 会增加元素的尺寸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">     padding: 20px;</span><br><span class="line">     width: 100px;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;宽度：width+padding-left+padding-right&#x3D;140px&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>​    这似乎和我们在现实世界所认识的宽度有所违背，就会导致我们设置 <code>box-sizing-border-box</code> 来达到我们所预期的宽度应该是100px，而 <code>content</code> 就变成就60px；甚至会在全局重置样式加入这样的声明，这样的做法是不推荐的。因为 <code>border-box</code> 只能让我们免去<code>padding</code> 的影响，但是 <code>margin</code> 带来的影响是无法消除的，没有 <code>margin-box</code>这个东西 。可以尝试在外面套个父级元素定宽来达到我们想要的效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.father&#123;</span><br><span class="line">     width:120px;</span><br><span class="line">&#125;</span><br><span class="line">.son&#123;</span><br><span class="line">     padding:12px;</span><br><span class="line">     margin:6px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class&#x3D;&quot;father&quot;&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;son&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>​    而 <code>box-sizing:border-box</code> 的正确用法应该是在我们使用原生的 <code>input</code> <code>textarea</code>等替换元素时，我们在设置<code>width：100%</code> 去填满父级元素是，他们是有 <code>border</code> 和 <code>padding</code> 的，我们会加 <code>padding</code> 让文本输入光标有一定的距离，默认的 <code>content-box</code> 会导致宽度溢出  ，这时候就可以通过 <code>border-box</code> 来达到我们想要的效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	.text&#123;</span><br><span class="line">           width: 100%;</span><br><span class="line">           box-sizing: border-box;</span><br><span class="line">           padding: 12px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">&lt;textarea name&#x3D;&quot;&quot; class&#x3D;&quot;text&quot; id&#x3D;&quot;&quot; cols&#x3D;&quot;30&quot; rows&#x3D;&quot;10&quot;&gt;&lt;&#x2F;textarea&gt;</span><br></pre></td></tr></table></figure>

<p>​    并不是设置了 <code>border-box</code> 元素的尺寸就不会变化了，当  <code>padding</code>足够大的时候， <code>width</code> 也就突然失效了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.box &#123; </span><br><span class="line"> width: 80px; </span><br><span class="line"> padding: 20px 60px; </span><br><span class="line"> box-sizing: border-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时 <code>div</code> 的宽度变成了 120px（60*2）。</p>
<p>​    上面是对于块状元素而发生的表现，对于内联元素（不包括 <code>img</code> 等替换元素）表现则有些不同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a&#123;</span><br><span class="line">  padding:50px;</span><br><span class="line">  background-color:#df0000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>很明显已经影响到其他元素的显示了，但是对上下元素的布局没有发生影响，只是在垂直方向发生了层叠</strong></p>
<p>​    <code>CSS</code> 中还有许多这样类似的不会影响其他元素的布局但是会出现层叠效果的现象，比如 <code>relative</code> 定位、盒子阴影 <code>box-shadow</code> 、以及 <code>outline</code> 。这些层叠现象看上去都类似，但是实际上有区别。主要分为两类：</p>
<ul>
<li><p><code>box-shadow</code> 和 <code>outline</code> 属于纯视觉层叠</p>
</li>
<li><p><code>inline</code> 元素<code>padding</code> 层叠则属于后者。</p>
<p>区分方式很简单，如果父容器设置 <code>overflow：auto</code> ，层叠区域超出父容器的时候，没有滚动条的是纯视觉效果；如果出现滚动条的，则是会影响尺寸和布局的。</p>
</li>
</ul>
<p>可见内联元素 <code>padding</code> 对视觉层和布局层具有双重影响</p>
<h3 id="内联元素-padding-有用对我们CSS开发有什么帮助呢？"><a href="#内联元素-padding-有用对我们CSS开发有什么帮助呢？" class="headerlink" title="内联元素 padding 有用对我们CSS开发有什么帮助呢？"></a>内联元素 padding 有用对我们CSS开发有什么帮助呢？</h3><ul>
<li><p>增加文字链接的点击区域，而不是去设置 <code>inline-block</code> 增加不必要的行间距</p>
</li>
<li><p>创建一个高度可控的分隔内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a+a::before&#123;</span><br><span class="line">           content: &#39;&#39;;</span><br><span class="line">           font-size: 0px;</span><br><span class="line">           padding: 12px 3px 1px;</span><br><span class="line">           border-left: 1px solid gray;</span><br><span class="line">           margin-left: 6px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">&lt;a href&#x3D;&quot;#&quot;&gt;登录&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;#&quot;&gt;注册&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="2-padding-的百分比值"><a href="#2-padding-的百分比值" class="headerlink" title="2. padding 的百分比值"></a>2. padding 的百分比值</h2><p>关于<code>padding</code> 的属性值有以下几点：</p>
<ul>
<li><p>和 <code>margin</code> 不同， <code>padding</code> 的属性值是不支持<strong>负值</strong></p>
</li>
<li><p><code>padding</code> 虽然支持百分比，但是和 <code>height</code> 等属性的百分比计算规则有差异：无论是水平方向还是垂直方向都是相对于宽度来计算的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">实现等比例矩形</span><br><span class="line"></span><br><span class="line">div&#123;</span><br><span class="line">    padding：50% 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div&#123;</span><br><span class="line">  padding: 25% 50%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="y用来实现顶部头图，比例5-1自适应"><a href="#y用来实现顶部头图，比例5-1自适应" class="headerlink" title="y用来实现顶部头图，比例5:1自适应"></a>y用来实现顶部头图，比例5:1自适应</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.div1&#123;</span><br><span class="line">         position: relative; </span><br><span class="line">         padding: 10% 45%;</span><br><span class="line">         background-color: chocolate;</span><br><span class="line">     &#125;</span><br><span class="line">     .div1&gt;img&#123;</span><br><span class="line">         position: absolute; </span><br><span class="line">         top: 0;</span><br><span class="line">         left: 0;</span><br><span class="line">         height: 100%;</span><br><span class="line">         width: 100%;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">      &lt;div class&#x3D;&quot;div1&quot;&gt;</span><br><span class="line">          &lt;img src&#x3D;&quot;..&#x2F;..&#x2F;images&#x2F;v2-de9685e11d1f46870d5330d48a20076b_hd.jpg&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="padding-百分比值应用在内联元素当中是什么效果"><a href="#padding-百分比值应用在内联元素当中是什么效果" class="headerlink" title="padding 百分比值应用在内联元素当中是什么效果"></a>padding 百分比值应用在内联元素当中是什么效果</h3><ul>
<li>同样相对于宽度来计算</li>
<li>默认的高度和宽度细节有差异</li>
<li><code>padding</code> 会断行</li>
</ul>
<p>下面是一个内联元素 <code>padding</code> 断行的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">     	border:2px solid #00cdfa;</span><br><span class="line">&#125;</span><br><span class="line">span&#123;</span><br><span class="line">     	background-color:gray;</span><br><span class="line">     	padding:50%</span><br><span class="line">&#125;</span><br><span class="line">&lt;span&gt;这里有六个字&lt;&#x2F;span&gt;</span><br></pre></td></tr></table></figure>

<p>效果非常诡异，我也没搞清楚是怎么会出现这样的效果。如果 <code>span</code> 元素里面没有内容，会发现也并不是等宽高的正方形，原因是： <strong>内联元素的垂直</strong> <code>padding</code>  <strong>会让’幽灵空白节点‘ 出现</strong> 。可以设置 <code>font-size:0</code>来消除这个空白节点带来的影响</p>
<h2 id="标签元素内置的-padding"><a href="#标签元素内置的-padding" class="headerlink" title="标签元素内置的 padding"></a>标签元素内置的 padding</h2><p>这是一些关于 <code>padding</code> 的小秘密</p>
<ul>
<li><code>ol li</code>  列表内置 <code>padding-left</code> 单位是 <code>px</code> <ul>
<li>当字体设置很大时，数字或者点会跑到外面去</li>
<li>当字体设置的很小时，数字或者点会里左边距离很大</li>
<li>当字体在 12-14px时，可以给 <code>ol/ul</code> 设置一个 22px的 <code>padding-left</code>  </li>
<li>如果要求比较高，使用<code>content</code> 计数器来模拟是一个不错的选择</li>
</ul>
</li>
<li>很多表单元素都内置了 <code>padding</code><ul>
<li>所有浏览器的 <code>input textarea</code> 输入框内置了 <code>padding</code> </li>
<li>所有浏览器的 <code>button</code> 按钮内置了 <code>padding</code></li>
<li>部分浏览器 <code>select</code> 下拉框内置了 <code>padding</code> ，Firefox IE8及以上的浏览器可以设置 <code>padding</code></li>
<li>所有浏览器 <code>radio checkbox</code> 单复选框无内置 <code>padding</code></li>
<li><code>button</code> 按钮元素的 <code>padding</code> 最难控制</li>
</ul>
</li>
</ul>
<p>由于 <code>button</code> 按钮元素在不同浏览器下 <code>padding</code> 的表象各不相同，我们大多数时候会选择用<a>标签 来模拟按钮，但是在表单中 <code>button</code> 是自带交互行为的，使用<a>标签是无法模拟的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id&#x3D;&quot;btn&quot;&gt;&lt;&#x2F;button&gt; </span><br><span class="line">&lt;label for&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;label&gt; </span><br><span class="line">button &#123; </span><br><span class="line"> position: absolute; </span><br><span class="line"> clip: rect(0 0 0 0); </span><br><span class="line">&#125; </span><br><span class="line">label &#123; </span><br><span class="line"> display: inline-block; </span><br><span class="line"> line-height: 20px; </span><br><span class="line"> padding: 10px; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用上面的方法，在保留了良好的语义性的同时，UI兼容性也非常好</p>
<h2 id="padding-与图形绘制"><a href="#padding-与图形绘制" class="headerlink" title="padding 与图形绘制"></a>padding 与图形绘制</h2><p><code>padding</code> 属性和 <code>background-clip</code> 属性配合，可以在有限的标签下实现一些CSS图形绘制效果，下面是两个例子：</p>
<ul>
<li>“三道杠” 分类图标效果，此效果在移动端比较常见</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.icon-menu &#123; </span><br><span class="line"> display: inline-block; </span><br><span class="line"> width: 140px; height: 10px; </span><br><span class="line"> padding: 35px 0; </span><br><span class="line"> border-top: 10px solid; </span><br><span class="line"> border-bottom: 10px solid; </span><br><span class="line"> background-color: currentColor; </span><br><span class="line"> background-clip: content-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>仅用一个标签，不用伪元素实现双层圆效果</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.icon-dot &#123; </span><br><span class="line"> display: inline-block; </span><br><span class="line"> width: 100px; height: 100px; </span><br><span class="line"> padding: 10px; </span><br><span class="line"> border: 10px solid; </span><br><span class="line"> border-radius: 50%; </span><br><span class="line"> background-color: currentColor; </span><br><span class="line"> background-clip: content-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-13T13:46:21.000Z">2020-01-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1699 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/13/%C2%96%C2%96%E5%85%B3%E4%BA%8E-Background%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%E5%92%8C%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/">关于 Background的一些基本用法和使用技巧</a>
            
        </h1>
        <div class="content">
            <h1 id="关于-Background的一些基本用法和使用技巧"><a href="#关于-Background的一些基本用法和使用技巧" class="headerlink" title="关于 Background的一些基本用法和使用技巧"></a>关于 Background的一些基本用法和使用技巧</h1><h2 id="1-基本属性和用法"><a href="#1-基本属性和用法" class="headerlink" title="1.基本属性和用法"></a>1.基本属性和用法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    &lt;style&gt;</span><br><span class="line">        .box1&#123;</span><br><span class="line">            width: 1000px;</span><br><span class="line">            height: 1000px;</span><br><span class="line">            background-color:royalblue;</span><br><span class="line">            background-image: url(&#39;..&#x2F;images&#x2F;111.jpg&#39;);</span><br><span class="line">            background-position: 220px 220px;</span><br><span class="line">            background-repeat: no-repeat;</span><br><span class="line">            background-size: 100%;</span><br><span class="line">            background-attachment: fixed;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;box1&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>background-color</code> 背景颜色<ul>
<li>单词直接表示：<code>background-color:red</code></li>
<li>16j进制表示：<code>background-color:#fff</code> (两个相同的位数可以简写成一个  #fffffff==#fff)</li>
<li>RGB彩色模式: <code>background-color:rgb(225,225,255)</code></li>
</ul>
</li>
<li><code>background-image</code>：背景图片<ul>
<li><code>background-image:url(&#39;../images/111.jpg&#39;)</code></li>
</ul>
</li>
<li><code>background-size</code>:背景尺寸<ul>
<li>百分比：<code>background-size:60%</code></li>
<li>像素：<code>background-size:200px</code></li>
<li><code>cover</code>: 把背景图片拓展到足够大，以使背景图片完全覆盖背景区域。背景图片也有可能某些部分无法显示出来</li>
<li><code>contain</code>: 把背景图片拓展至最大尺寸，以使其高度和宽度完全适应内容区域</li>
<li>当只有一个值的时候,默认为图片的宽度，高度按比例自适应</li>
</ul>
</li>
<li><code>background-repeat</code> 背景图片重复<ul>
<li>repeat(自动铺满)</li>
<li>repeat-x（横向铺满）</li>
<li>repeat-y（纵向铺满）</li>
<li>no-repeat (不重复，只有一张)</li>
</ul>
</li>
</ul>
<h2 id="2-多背景图片"><a href="#2-多背景图片" class="headerlink" title="2.多背景图片"></a>2.多背景图片</h2><p>在CSS2.1中，元素只能添加一张背景图片。然而在CSS3中我们可以给元素添加多张背景图片。兼容性如下：</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e9625a57357?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<ul>
<li>多张背景图片可以针对每一张设置单独的样式，对应的样式用逗号分开</li>
<li>如果属性值比背景图片要少时，name没有对应值的图片的样式以第一个样式为准；</li>
<li>多张背景图片的情况下这些图片从左到右层级一次减小，<code>background-color</code>最低</li>
</ul>
<h2 id="3-背景渐变：background-image-linear-gradient"><a href="#3-背景渐变：background-image-linear-gradient" class="headerlink" title="3. 背景渐变：background-image: linear-gradient"></a>3. 背景渐变：background-image: linear-gradient</h2><p>背景渐变是基于<code>background-image</code>来设置的，具体语法可以参考 <a href="https://developer.mozilla.org/es/docs/Web/CSS/linear-gradient">MDN</a>。</p>
<p>兼容性如下：</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e964271dc19?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<ul>
<li><code>background-imgage: linear-gradient</code>路径渐变（可以手动设置方向，默认是自下向上）</li>
<li><code>background-image：repeating-linear-gradient</code> 重复径向渐变</li>
</ul>
<h2 id="4-背景定位-background-position"><a href="#4-背景定位-background-position" class="headerlink" title="4. 背景定位 background-position"></a>4. 背景定位 background-position</h2><p><code>background-position</code> 默认是定位在 <code>padding-box</code>的左上角</p>
<ul>
<li>其属性可以设置成一下几种<ul>
<li>百分比%</li>
<li>像素 px</li>
<li>位置（top、right、bottom、left、center）<ul>
<li>在只设置一个值的时候，另外一个值默认为<code>center</code> 或者50%。</li>
<li><code>padding-box</code>的左上角坐标为（0,0）/（left，top）</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    &lt;style&gt;</span><br><span class="line">        .box1&#123;</span><br><span class="line">            &#x2F;* width: 400px; *&#x2F;</span><br><span class="line">            height: 400px;</span><br><span class="line">            background-image: url(&#39;..&#x2F;images&#x2F;222.jpg&#39;);</span><br><span class="line">            padding: 50px;</span><br><span class="line">            border: 1px solid red;</span><br><span class="line">            background-position: top;</span><br><span class="line">            &#x2F;* background-size: contain; *&#x2F;</span><br><span class="line">            background-repeat: no-repeat;</span><br><span class="line">            background-color: darkkhaki;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;box1&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="背景重复-background-repeat"><a href="#背景重复-background-repeat" class="headerlink" title="背景重复  background-repeat"></a>背景重复  background-repeat</h3><p><code>background-repeat</code> 除了常见的几个 repeat、repeat-x，repeat-y 以及 no-repeat 以外，还在CSS3 中新加了两个值： <code>space</code> 和 <code>round</code>。其兼容性如下图所示：</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e9699bfff12?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<ul>
<li><p>背景图片小于容器时</p>
<ul>
<li><p><code>background-repeat:space</code>   在保证不缩放的前提下尽可能多的重复图片，并等分图片中间的空隙</p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e969c5b3299?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
<li><p><code>background-repeat:round</code>   在尽可能多的重复图片的前提下，拉伸图片以铺满容器</p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e969dca9f46?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
</ul>
</li>
<li><p>背景图片大于容器时</p>
<ul>
<li><code>background-repeat:space</code>  在不缩放的前提下裁剪图片，只保留在容器内的部分</li>
</ul>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e969e234b0e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
<ul>
<li><code>background-repeat:round</code>  缩小图片以铺满容器，长宽与容器尺寸一致（未按比例缩放，图片极有可能变形）</li>
</ul>
</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e969efaad83?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<h2 id="5-背景相对位置-background-origin"><a href="#5-背景相对位置-background-origin" class="headerlink" title="5. 背景相对位置  background-origin"></a>5. 背景相对位置  background-origin</h2><p><code>background-origin</code>规定 <code>background-position</code> 属性相对于什么位置来定位。属性值有 <code>content-box</code>、</p>
<p>padding-<code>box</code> 、    <code>border-box</code> 三个。默认<code>是padding-box</code> </p>
<h2 id="6-背景绘制区域-background-clip"><a href="#6-背景绘制区域-background-clip" class="headerlink" title="6.  背景绘制区域  background-clip"></a>6.  背景绘制区域  background-clip</h2><p><code>background-clip</code> 属性规定背景的绘制区域。默认值为 <code>border-box</code>，其属性值同 <code>background-origin</code> 一样，不过表现大不相同。其兼容性如下：</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96cddbab0d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<ul>
<li><p><code>background-clip: content-box</code></p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96f1e720bf?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
<li><p><code>background-clip: padding-box</code></p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96d043978a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
<li><p>background-clip: border-box`</p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96f56b4655?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
</ul>
<h2 id="7-背景大小-background-size"><a href="#7-背景大小-background-size" class="headerlink" title="7. 背景大小  background-size"></a>7. 背景大小  background-size</h2><p>感觉这个属性很常见吧，其实它也是 CSS3 中新加的属性。 CSS2.1 中，背景图片大小是无法设置的。<code>background-size</code> 除了常见的设置大小和百分比之外，还有两个特殊的属性：<code>contain</code>  和 <code>cover</code></p>
<ul>
<li><p><code>background-size: contain</code>   图片长宽不相同时，把图片按比例缩小至较长的一方完全适应内容区域为止，多用于背景图片比元素大的情况。</p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96f66b3c62?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
<li><p><code>background-size: cover</code>   图片长宽不相同时，把图片按比例放大至较短的一方完全适应内容区域为止，以使背景图像完全覆盖背景区域，多用于背景图片比元素小的情况。</p>
<p>​</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96fc2c4628?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="图片"></p>
<p>​</p>
</li>
</ul>
<h2 id="8-背景固定-background-attachment"><a href="#8-背景固定-background-attachment" class="headerlink" title="8.  背景固定   background-attachment"></a>8.  背景固定   background-attachment</h2><p>有时候在一些网站上会看到，滚动页面的时候，背景图片是固定的。那就是使用 <code>background-attachment: fixed</code>  做到的。</p>
<ul>
<li><code>background-attachment: fixed</code>    背景固定</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96f9ef8d6f?imageslim" alt="图片"></p>
<ul>
<li><code>background-attachment: scroll</code>    背景随页面滚动而滚动（默认）</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2020/1/12/16f98e96fcc5c73c?imageslim" alt="图片"></p>
<h2 id="9-扩展属性-background-element"><a href="#9-扩展属性-background-element" class="headerlink" title="9.  扩展属性   background: element"></a>9.  扩展属性   background: element</h2><p>一个特殊的扩展属性，可以将某个元素设置为另一元素的背景。惊不惊喜，意不意外！不过这个属性只有 FireFox 4+ 的浏览器可以使用，并且需要加上浏览器前缀。</p>
<ul>
<li><pre><code>background: element(#id)
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- demo1   作为背景的是非图片元素时，背景样式与原元素相同</span><br></pre></td></tr></table></figure>
&lt;style&gt;
    .div {
      width: 200px;
      height: 200px;
      background: element(#button)  no-repeat;
      background: -moz-element(#button)  no-repeat;
  }
  #button {
      width: 150px;
      height: 20px;
      margin: 50px;
      color: #0470f4;
  }
&lt;/style&gt;

&lt;body&gt;
  &lt;div class=&quot;div1&quot;&gt;
      &lt;button id=&apos;button&apos;&gt;这是按钮&lt;/button&gt;
  &lt;/div&gt;
&lt;/body&gt;

</code></pre></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![图片](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;12&#x2F;16f98e971b209ffc?imageslim)</span><br><span class="line"></span><br><span class="line">- demo2  当设置为背景的元素是图片时，背景图不会随原图的大小样式改变而改变，不过平铺等背景样式依然是支持的</span><br></pre></td></tr></table></figure>
  <style>
      .div {
        width: 200px;
        height: 200px;
        border: 10px dashed #0ff;
        background: element(#img1);
        background: -moz-element(#img1);
    }
    #img1 {
        width: 50px;
    }  
  </style>

  <body>
    <div class="div1">
        <img id='img1' src='img1' />
    </div>
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>


<p>```</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-08T10:12:00.000Z">2020-01-08</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 1028 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/08/MVVM%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6-vue%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/">MVVM设计框架-vue如何实现的</a>
            
        </h1>
        <div class="content">
            <h1 id="MVVM设计框架"><a href="#MVVM设计框架" class="headerlink" title="MVVM设计框架"></a>MVVM设计框架</h1><p>##问题</p>
<ul>
<li>说一下使用jQuery和使用vue、react等框架的区别</li>
<li>说一下对<code>MVVM</code>的理解</li>
<li>vue 中如何实现响应式</li>
<li>vue 中如何解析模板</li>
<li>vue 的整个实现流程</li>
</ul>
<h2 id="1-说一下使用jQuery和使用vue、react等框架的区别"><a href="#1-说一下使用jQuery和使用vue、react等框架的区别" class="headerlink" title="1. 说一下使用jQuery和使用vue、react等框架的区别"></a>1. 说一下使用jQuery和使用vue、react等框架的区别</h2><ul>
<li>jQuery 实现 todo-list</li>
<li>vue 实现 todo-list</li>
<li>jQuery和框架的区别</li>
</ul>
<h3 id="jQuery-实现-todo-list"><a href="#jQuery-实现-todo-list" class="headerlink" title="jQuery 实现 todo-list"></a>jQuery 实现 todo-list</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;&quot; id&#x3D;&quot;text-title&quot;&gt;</span><br><span class="line">        &lt;button id&#x3D;&quot;btn&quot;&gt;提交&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul id&#x3D;&quot;list&quot;&gt;&lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var textTitle &#x3D; $(&quot;#text-title&quot;)</span><br><span class="line">    var btn &#x3D; $(&quot;#btn&quot;)</span><br><span class="line">    var list &#x3D; $(&quot;#list&quot;)</span><br><span class="line"></span><br><span class="line">    btn.click(function () &#123;</span><br><span class="line">        &#x2F;&#x2F; dom 和数据耦合在一起</span><br><span class="line">        var title &#x3D; textTitle.val()</span><br><span class="line">        if(!title)&#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        var li &#x3D; $(&#96;&lt;li&gt;$&#123;title&#125;&lt;&#x2F;li&gt;&#96;)</span><br><span class="line">        list.append(li)</span><br><span class="line">        textTitle.val(&#39;&#39;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="vue-实现-todo-list"><a href="#vue-实现-todo-list" class="headerlink" title="vue 实现 todo-list"></a>vue 实现 todo-list</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;title&quot;&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;add&quot;&gt;submit&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;index&quot;&gt;&#123;&#123;item&#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    var vm &#x3D; new Vue(&#123;</span><br><span class="line">        el:&quot;#app&quot;,</span><br><span class="line">        data:&#123;</span><br><span class="line">            &#x2F;&#x2F; 数据驱动视图</span><br><span class="line">            title:&#39;&#39;,</span><br><span class="line">            list:[]</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            add()&#123;</span><br><span class="line">                &#x2F;&#x2F; 修改数据，视图的修改vue会帮你做</span><br><span class="line">                &#x2F;&#x2F; 利用diff算法去优化了DOM操作</span><br><span class="line">                this.list.push(this.title)</span><br><span class="line">                this.title &#x3D; &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="这两个案例可以看出来两者的区别"><a href="#这两个案例可以看出来两者的区别" class="headerlink" title="这两个案例可以看出来两者的区别"></a>这两个案例可以看出来两者的区别</h3><ul>
<li>数据和视图的分离，解耦（开放封闭原则）</li>
<li>以数据驱动视图，只关心数据变化，DOM操作被封装</li>
</ul>
<h2 id="2-说一下对-MVVM-的理解"><a href="#2-说一下对-MVVM-的理解" class="headerlink" title="2. 说一下对 MVVM 的理解"></a>2. 说一下对 <code>MVVM</code> 的理解</h2><ul>
<li><p>什么是MVC</p>
<ul>
<li>Model 数据</li>
<li>View 用户视图</li>
<li>Controller 控制器</li>
</ul>
</li>
<li><p>MVVM</p>
<ul>
<li>Model  数据 Data</li>
<li>View  视图HTML</li>
<li>ViewModel <strong>连接View和Model</strong></li>
</ul>
</li>
<li><p>MVVM不算是一种创新</p>
</li>
<li><p>但是其中的 <code>ViewModel</code> 是一种创新</p>
</li>
<li><p>真正的结合前端场景应用的创建</p>
</li>
</ul>
<h3 id="MVVM框架的三大要素"><a href="#MVVM框架的三大要素" class="headerlink" title="MVVM框架的三大要素"></a>MVVM框架的三大要素</h3><ul>
<li>响应式：vue如何监听到 data 的每个属性的变化？</li>
<li>模板引擎： vue的模板如何被解析，指令如何处理？</li>
<li>渲染： vue的模板如何被渲染成html？以及渲染过程</li>
</ul>
<h2 id="3-vue中如何实现响应式"><a href="#3-vue中如何实现响应式" class="headerlink" title="3. vue中如何实现响应式"></a>3. vue中如何实现响应式</h2><ul>
<li><p>什么是响应式</p>
<ul>
<li>修改data属性之后，vue立刻监听到</li>
<li>data 属性被代理到vm上</li>
<li>演示</li>
</ul>
</li>
<li><p>Object.defineProperty  将data属性代理到vm上</p>
</li>
<li><p>模拟</p>
<h3 id="利用Object-defineProperty模拟响应式"><a href="#利用Object-defineProperty模拟响应式" class="headerlink" title="利用Object.defineProperty模拟响应式"></a>利用Object.defineProperty模拟响应式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var obj &#x3D; &#123;</span><br><span class="line">    name: &quot;wang&quot;,</span><br><span class="line">    age: 22</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Proxy (obj) &#123;</span><br><span class="line">    Object.keys(obj).forEach( (key) &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F;这里是核心，把obj数据代理到w上</span><br><span class="line">        Object.defineProperty(vm,key,&#123;</span><br><span class="line">            get: function () &#123;</span><br><span class="line">                return obj[key];</span><br><span class="line">            &#125;,</span><br><span class="line">            set: function (newValue) &#123;</span><br><span class="line">                if(newValue &#x3D;&#x3D;&#x3D; obj[key])&#123;</span><br><span class="line">                    return obj[key]</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    obj[key] &#x3D; newValue</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="4-Vue中如何解析模板"><a href="#4-Vue中如何解析模板" class="headerlink" title="4. Vue中如何解析模板"></a>4. Vue中如何解析模板</h2><ul>
<li>模板是什么</li>
<li><code>render</code> 函数</li>
<li><code>render</code> 函数与 vdom</li>
</ul>
<h3 id="模板是什么"><a href="#模板是什么" class="headerlink" title="模板是什么"></a>模板是什么</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;title&quot;&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;add&quot;&gt;submit&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;index&quot;&gt;&#123;&#123;item&#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>模板的本质就是字符串</strong></li>
<li><strong>是有逻辑的字符串，v-if、v-for。。。  还可以嵌入JS变量</strong></li>
<li><strong>类似html格式，但是有很大区别</strong></li>
<li><strong>最终会被转换成html来显示</strong></li>
<li><strong>最终必须转换成JS代码（有逻辑，JS是图灵完备语言）</strong></li>
<li><strong>需要一个JS函数（render函数）</strong></li>
</ul>
<h3 id="render函数-with的用法"><a href="#render函数-with的用法" class="headerlink" title="render函数  with的用法"></a>render函数  with的用法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var obj &#x3D; &#123;</span><br><span class="line">    name: &#39;张三&#39;,</span><br><span class="line">    age: 20,</span><br><span class="line">    getAddress: function () &#123;</span><br><span class="line">        alert(&#39;nanchang&#39;)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;不用with</span><br><span class="line"></span><br><span class="line">function fn() &#123;</span><br><span class="line">    alert(obj.name)</span><br><span class="line">    alert(obj.age)</span><br><span class="line">    obj.getAddress()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;使用with    不建议自己实际开发的时候使用</span><br><span class="line">&#x2F;&#x2F;vue 里面用了，但也只是它内部使用</span><br><span class="line">function fn2 () &#123;</span><br><span class="line">    with(obj) &#123;</span><br><span class="line">        alert(name)</span><br><span class="line">        alert(age)</span><br><span class="line">        getAddress()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-render-函数和-vnode"><a href="#5-render-函数和-vnode" class="headerlink" title="5. render 函数和 vnode"></a>5. render 函数和 vnode</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vm._update(vnode) &#123;</span><br><span class="line">    const preVnode &#x3D; vm._vnode</span><br><span class="line">    vm._vnodee &#x3D; vnode</span><br><span class="line">    if(!preVnode) &#123;</span><br><span class="line">        vm.$el &#x3D; vm.__patch__(vm.$el, vnoded)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        vm.$el &#x3D; vm.__patch__(preVnode, vnoded)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function updateComponent () &#123;</span><br><span class="line">    &#x2F;&#x2F;vm._render 即上面的render 函数，并返回vnode</span><br><span class="line">    vm._update(vm._render())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>updateComponent</code>中实现了vdom和patch</li>
<li>页面首次渲染执行 <code>updateComponent</code></li>
<li>data中每次修改属性值，执行updateComponent</li>
</ul>
<h2 id="6-Vue-的整个实现流程"><a href="#6-Vue-的整个实现流程" class="headerlink" title="6. Vue 的整个实现流程"></a>6. <code>Vue</code> 的整个实现流程</h2><ul>
<li>第一步： 解析模板成<code>render</code>函数</li>
<li>第二步： 响应式开始监听</li>
<li>第三步： 首次渲染，显示页面，且绑定依赖<ul>
<li>为什么监听 get，只监听set不行吗</li>
<li>data 中有很多属性，有些会被用到，有些可能不会被用到</li>
<li>未走 get 中的属性， set的时候我们也无需关心</li>
<li>避免不必要的重新渲染</li>
</ul>
</li>
<li>第四步： data属性变化，触发 <code>rerender</code>函数</li>
</ul>
<h3 id="根据Demo-说明"><a href="#根据Demo-说明" class="headerlink" title="根据Demo 说明"></a>根据Demo 说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">                                &#x2F;&#x2F;第一步： 解析模板成 render 函数</span><br><span class="line">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;title&quot;&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;add&quot;&gt;submit&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;index&quot;&gt;&#123;&#123;item&#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    var vm &#x3D; new Vue(&#123;</span><br><span class="line">        el:&quot;#app&quot;,</span><br><span class="line">        data:&#123;                  &#x2F;&#x2F;第二步： 响应式开始监听   将data中数据通过 Object.defineProperty 绑定到vm中</span><br><span class="line">            &#x2F;&#x2F; 数据驱动视图</span><br><span class="line">            title:&#39;&#39;,</span><br><span class="line">            list:[]</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            add()&#123;</span><br><span class="line">                &#x2F;&#x2F; 修改数据，视图的修改vue会帮你做</span><br><span class="line">                &#x2F;&#x2F; 利用diff算法去优化了DOM操作</span><br><span class="line">                this.list.push(this.title)</span><br><span class="line">                this.title &#x3D; &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                &#x2F;&#x2F;第三步： 首次渲染，显示页面，且绑定依赖</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-08T03:20:56.000Z">2020-01-08</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    8 分钟 读完 (大约 1184 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/08/virtual-dom%EF%BC%88%E8%99%9A%E6%8B%9FDOM%EF%BC%89/">virtual dom（虚拟DOM）</a>
            
        </h1>
        <div class="content">
            <h1 id="virtual-dom（虚拟DOM）"><a href="#virtual-dom（虚拟DOM）" class="headerlink" title="virtual dom（虚拟DOM）"></a>virtual dom（虚拟DOM）</h1><ul>
<li><p>vdom是vue和React的核心，先讲哪个都绕不开它</p>
</li>
<li><p>vdom比较独立，使用也比较简单</p>
</li>
<li><p>如果面试问到vue和React的实现，vdom是肯定会问的</p>
</li>
<li><p>关于vdom的几个问题</p>
<ul>
<li>vdom是什么？为什么会存在vdom？jQuery它不香吗？</li>
<li>vdom如何使用，核心API是什么？</li>
<li>介绍一下 diff算法</li>
</ul>
</li>
</ul>
<h2 id="1-什么是vdom，为何使用vdom-如何用JS模拟DOM结构"><a href="#1-什么是vdom，为何使用vdom-如何用JS模拟DOM结构" class="headerlink" title="1. 什么是vdom，为何使用vdom,如何用JS模拟DOM结构"></a>1. 什么是vdom，为何使用vdom,如何用JS模拟DOM结构</h2><ul>
<li>virtual dom 虚拟DOM</li>
<li>用JS模拟DOM结构</li>
<li>DOM变化的对比，放在JS层来做（js是图灵完备语言）</li>
<li>提高重绘重排性能</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> &lt;ul id&#x3D;&quot;list&quot;&gt;</span><br><span class="line">    &lt;li class&#x3D;&quot;item&quot; id&#x3D;&quot;item1&quot;&gt;item 1&lt;&#x2F;li&gt;</span><br><span class="line">    &lt;li class&#x3D;&quot;item&quot; id&#x3D;&quot;item2&quot;&gt;item 2&lt;&#x2F;li&gt;</span><br><span class="line"> &lt;&#x2F;ul&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;使用JS模拟DOM结构</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    tag: &#39;ul&#39;,</span><br><span class="line">    attrs: &#123;</span><br><span class="line">        id: &#39;list&#39;</span><br><span class="line">    &#125;,</span><br><span class="line">    children:[</span><br><span class="line">        &#123;</span><br><span class="line">            tag: &#39;li&#39;,</span><br><span class="line">            attrs:&#123;</span><br><span class="line">                className: &#39;item&#39;,</span><br><span class="line">                id: &#39;item1&#39;</span><br><span class="line">            &#125;,</span><br><span class="line">            children: [&#39;item 1&#39;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            tag: &#39;li&#39;,</span><br><span class="line">            attrs:&#123;</span><br><span class="line">                className: &#39;item&#39;,</span><br><span class="line">                id: &#39;item2&#39;</span><br><span class="line">            &#125;,</span><br><span class="line">            children: [&#39;item 2&#39;]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="设计一个需求场景"><a href="#设计一个需求场景" class="headerlink" title="设计一个需求场景"></a>设计一个需求场景</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;caontainer&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;button id&#x3D;&quot;btn&quot;&gt;click&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var data &#x3D; [</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;wang san&quot;,</span><br><span class="line">                age: 20,</span><br><span class="line">                address: &quot;北京&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;zhang san&quot;,</span><br><span class="line">                age: 23,</span><br><span class="line">                address: &quot;上海&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;wang si&quot;,</span><br><span class="line">                age: 22,</span><br><span class="line">                address: &quot;广州&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    function render (data) &#123;</span><br><span class="line">        var container &#x3D; $(&quot;#caontainer&quot;)</span><br><span class="line">        container.html(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">        var $table &#x3D; $(&#39;&lt;table&gt;&#39;)</span><br><span class="line">        $table.append(&#39;&lt;tr&gt;&lt;td&gt;name&lt;&#x2F;td&gt;&lt;td&gt;age&lt;&#x2F;td&gt;&lt;td&gt;address&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;&#39;)</span><br><span class="line">        data.forEach(function (item) &#123;</span><br><span class="line">            $table.append(&#39;&lt;tr&gt;&lt;td&gt;item.name&lt;&#x2F;td&gt;&lt;td&gt;item.age&lt;&#x2F;td&gt;&lt;td&gt;item.address&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;&#39;)</span><br><span class="line">        &#125;)</span><br><span class="line">        container.append($table)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $(&quot;#btn&quot;).click(function () &#123;</span><br><span class="line">        data[1].age &#x3D; &quot;32&quot;</span><br><span class="line">        data[2].address &#x3D; &quot;南昌&quot;</span><br><span class="line">        render(data)</span><br><span class="line">        &#x2F;&#x2F;每次都会重新渲染DOM节点</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p><strong>原因：</strong></p>
<ul>
<li>DOM操作是”昂贵”的，JS运行效率是很高的</li>
<li>尽量减少DOM操作，而不是每次都“推到重来”</li>
<li>项目越复杂，影响就越严重</li>
<li>vdom就可以解决这个问题</li>
</ul>
<h2 id="2-vdom如何应用，核心API是什么"><a href="#2-vdom如何应用，核心API是什么" class="headerlink" title="2. vdom如何应用，核心API是什么"></a>2. vdom如何应用，核心API是什么</h2><h4 id="什么是snabbdom"><a href="#什么是snabbdom" class="headerlink" title="什么是snabbdom"></a>什么是<code>snabbdom</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">var snabbdom &#x3D; require(&#39;snabbdom&#39;);</span><br><span class="line">var patch &#x3D; snabbdom.init([ &#x2F;&#x2F; Init patch function with chosen modules</span><br><span class="line">require(&#39;snabbdom&#x2F;modules&#x2F;class&#39;).default, &#x2F;&#x2F; makes it easy to toggle classes</span><br><span class="line">require(&#39;snabbdom&#x2F;modules&#x2F;props&#39;).default, &#x2F;&#x2F; for setting properties on DOM elements</span><br><span class="line">require(&#39;snabbdom&#x2F;modules&#x2F;style&#39;).default, &#x2F;&#x2F; handles styling on elements with support for animations</span><br><span class="line">require(&#39;snabbdom&#x2F;modules&#x2F;eventlisteners&#39;).default, &#x2F;&#x2F; attaches event listeners</span><br><span class="line">]);</span><br><span class="line">var h &#x3D; require(&#39;snabbdom&#x2F;h&#39;).default; &#x2F;&#x2F; helper function for creating vnodes</span><br><span class="line"></span><br><span class="line">var container &#x3D; document.getElementById(&#39;container&#39;);</span><br><span class="line"></span><br><span class="line">var vnode &#x3D; h(&#39;div#container.two.classes&#39;, &#123;on: &#123;click: someFn&#125;&#125;, [</span><br><span class="line">h(&#39;span&#39;, &#123;style: &#123;fontWeight: &#39;bold&#39;&#125;&#125;, &#39;This is bold&#39;),</span><br><span class="line">&#39; and this is just normal text&#39;,</span><br><span class="line">h(&#39;a&#39;, &#123;props: &#123;href: &#39;&#x2F;foo&#39;&#125;&#125;, &#39;I\&#39;ll take you places!&#39;)</span><br><span class="line">]);</span><br><span class="line">&#x2F;&#x2F; Patch into empty DOM element – this modifies the DOM as a side effect</span><br><span class="line">patch(container, vnode);</span><br><span class="line"></span><br><span class="line">var newVnode &#x3D; h(&#39;div#container.two.classes&#39;, &#123;on: &#123;click: anotherEventHandler&#125;&#125;, [</span><br><span class="line">h(&#39;span&#39;, &#123;style: &#123;fontWeight: &#39;normal&#39;, fontStyle: &#39;italic&#39;&#125;&#125;, &#39;This is now italic type&#39;),</span><br><span class="line">&#39; and this is still just normal text&#39;,</span><br><span class="line">h(&#39;a&#39;, &#123;props: &#123;href: &#39;&#x2F;bar&#39;&#125;&#125;, &#39;I\&#39;ll take you places!&#39;)</span><br><span class="line">]);</span><br><span class="line">&#x2F;&#x2F; Second &#96;patch&#96; invocation</span><br><span class="line">patch(vnode, newVnode); &#x2F;&#x2F; Snabbdom efficiently updates the old view to the new state</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; to unmount from the DOM and clean up, simply pass null</span><br><span class="line">patch(newVnode, null)</span><br></pre></td></tr></table></figure>

<h4 id="尝试着使用一下snabbdom"><a href="#尝试着使用一下snabbdom" class="headerlink" title="尝试着使用一下snabbdom"></a>尝试着使用一下snabbdom</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;ie&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-class.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-props.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-style.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-eventlisteners.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;h.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;container&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button id&#x3D;&quot;btn&quot;&gt;click&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">     var snabbdom &#x3D; window.snabbdom</span><br><span class="line"></span><br><span class="line">     &#x2F;&#x2F;定义 patch</span><br><span class="line">     var patch &#x3D; snabbdom.init([</span><br><span class="line">         snabbdom_class,</span><br><span class="line">         snabbdom_props,</span><br><span class="line">         snabbdom_style,</span><br><span class="line">         snabbdom_eventlisteners</span><br><span class="line">     ])</span><br><span class="line"></span><br><span class="line">     &#x2F;&#x2F;定义 h</span><br><span class="line">     var h &#x3D; snabbdom.h</span><br><span class="line"></span><br><span class="line">     var container &#x3D; document.getElementById(&quot;container&quot;)</span><br><span class="line">     &#x2F;&#x2F;生成 vnode</span><br><span class="line">     var vnode &#x3D; h(&#39;ul#list&#39;,&#123;&#125;,[</span><br><span class="line">         h(&#39;li.item&#39;,&#123;&#125;,&quot;item-1&quot;),</span><br><span class="line">         h(&#39;li.item&#39;,&#123;&#125;,&quot;item-2&quot;)</span><br><span class="line">     ])</span><br><span class="line"></span><br><span class="line">     patch(container,vnode)</span><br><span class="line">     </span><br><span class="line">     console.log(patch.toString());</span><br><span class="line"></span><br><span class="line">     document.getElementById(&quot;btn&quot;).addEventListener(&#39;click&#39;, function (e) &#123;</span><br><span class="line">        var newVnode &#x3D; h(&#39;ul#list&#39;,&#123;&#125;,[</span><br><span class="line">            h(&#39;li.item&#39;,&#123;&#125;,&quot;item-1&quot;),</span><br><span class="line">            h(&#39;li.item&#39;,&#123;&#125;,&quot;item-B&quot;),</span><br><span class="line">            h(&#39;li.item&#39;,&#123;&#125;,&quot;item-3&quot;)</span><br><span class="line">        ])</span><br><span class="line">        </span><br><span class="line">        patch(vnode,newVnode)  &#x2F;&#x2F;会重新比较</span><br><span class="line">     &#125;,false)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="snabbdom的实际应用"><a href="#snabbdom的实际应用" class="headerlink" title="snabbdom的实际应用"></a>snabbdom的实际应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;ie&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-class.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-props.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-style.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;snabbdom-eventlisteners.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;snabbdom&#x2F;0.7.3&#x2F;h.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;.&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;container&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button id&#x3D;&quot;btn&quot;&gt;click&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">     var snabbdom &#x3D; window.snabbdom</span><br><span class="line"></span><br><span class="line">     &#x2F;&#x2F;定义 patch</span><br><span class="line">     var patch &#x3D; snabbdom.init([</span><br><span class="line">         snabbdom_class,</span><br><span class="line">         snabbdom_props,</span><br><span class="line">         snabbdom_style,</span><br><span class="line">         snabbdom_eventlisteners</span><br><span class="line">     ])</span><br><span class="line"></span><br><span class="line">     &#x2F;&#x2F;定义 h</span><br><span class="line">     var h &#x3D; snabbdom.h</span><br><span class="line"></span><br><span class="line">     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     var data &#x3D; [</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;wang san&quot;,</span><br><span class="line">                age: 20,</span><br><span class="line">                address: &quot;北京&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;zhang san&quot;,</span><br><span class="line">                age: 23,</span><br><span class="line">                address: &quot;上海&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;wang si&quot;,</span><br><span class="line">                age: 22,</span><br><span class="line">                address: &quot;广州&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">    data.unshift(&#123;</span><br><span class="line">        name: &quot;姓名&quot;,</span><br><span class="line">        age: &#39;年龄&#39;,</span><br><span class="line">        address: &#39;地址&#39;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    var container &#x3D; document.getElementById(&quot;container&quot;)</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;渲染函数</span><br><span class="line">    var vnode</span><br><span class="line">    function render (data) &#123;</span><br><span class="line">        var newVnode &#x3D; h(&#39;table&#39;,&#123;&#125;,data.map((item) &#x3D;&gt; &#123;</span><br><span class="line">            var tds &#x3D; []</span><br><span class="line">            var i;</span><br><span class="line">            for(i in item) &#123;</span><br><span class="line">                if(item.hasOwnProperty(i))&#123;</span><br><span class="line">                    tds.push(h(&#39;td&#39;, &#123;&#125;, item[i] + &#39;&#39;))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return h(&#39;tr&#39;,&#123;&#125;, tds)</span><br><span class="line">        &#125;))</span><br><span class="line"></span><br><span class="line">        if(vnode) &#123;</span><br><span class="line">            patch(vnode,newVnode)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            &#x2F;&#x2F;初次渲染</span><br><span class="line">            patch(container, newVnode)</span><br><span class="line">        &#125;</span><br><span class="line">        vnode &#x3D; newVnode</span><br><span class="line">    &#125;</span><br><span class="line">    render(data)</span><br><span class="line">    $(&quot;#btn&quot;).click(function () &#123;</span><br><span class="line">        console.log(vnode);</span><br><span class="line">        data[1].age &#x3D; &quot;30&quot;</span><br><span class="line">        data[2].address &#x3D; &quot;南昌&quot;</span><br><span class="line">        render(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-介绍一下-diff-算法"><a href="#3-介绍一下-diff-算法" class="headerlink" title="3. 介绍一下 diff 算法"></a>3. 介绍一下 diff 算法</h2><ul>
<li>什么是 <code>diff</code> 算法</li>
<li>去繁就简<ul>
<li>diff算法非常复杂，实现难度很大，源码量很大</li>
<li>去繁就简，讲明白核心流程，不关心细节</li>
<li>面试官也大部分都不清楚细节，但是关心核心流程</li>
<li>去繁就简之后还是很有挑战性，值得去研究</li>
</ul>
</li>
<li>vdom 为什么要用diff算法<ul>
<li>DOM 操作是昂贵的，因此要尽量减少DOM操作</li>
<li>找出本次DOM必须更新的节点来更新，其他的不更新</li>
<li>这个”找出”的过程，就需要diff算法</li>
</ul>
</li>
</ul>
<h3 id="diff实现过程"><a href="#diff实现过程" class="headerlink" title="diff实现过程"></a>diff实现过程</h3><ul>
<li>patch(container,vnode)</li>
<li>patch(vnode,newVnode) </li>
<li>createElement</li>
<li>updateChildren</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function createElements (vnode) &#123;</span><br><span class="line">        let tag &#x3D; vnode.tag</span><br><span class="line">        let attrs &#x3D; vnode.attrs</span><br><span class="line">        let children &#x3D; vnode.children</span><br><span class="line">        if(!tag) return null;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;创建元素</span><br><span class="line">        let elem &#x3D; document.createElement(tag)</span><br><span class="line">        &#x2F;&#x2F;添加属性</span><br><span class="line">        for(var attrName in attrs) &#123;</span><br><span class="line">            if(attrs.hasOwnProperty)&#123;</span><br><span class="line">                elem.setAttribute(attrName,attrs[attrName])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(children);</span><br><span class="line">        &#x2F;&#x2F;给elem添加子元素,子元素递归生成</span><br><span class="line">        children.forEach(function (child) &#123;</span><br><span class="line">            elem.appendChild(createElements(child))</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F;返回真实的DOM节点</span><br><span class="line">        return elem;</span><br><span class="line">    &#125;</span><br><span class="line">    document.body.append(createElements(vnode))</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="比较两个vdom之间的区别"><a href="#比较两个vdom之间的区别" class="headerlink" title="比较两个vdom之间的区别"></a>比较两个vdom之间的区别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">function updateChildren (vnode, newVnode) &#123;</span><br><span class="line">    let children &#x3D; vnode.children || []</span><br><span class="line">    let newChildren &#x3D; newVnode.children || []</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;遍历现有的 children</span><br><span class="line">    children.forEach( function (childVnode,  index) &#123;</span><br><span class="line">        var newChildVnode &#x3D; newChildren[index]</span><br><span class="line"></span><br><span class="line">        if(childVnode.tag &#x3D;&#x3D; newChildVnode.tag) &#123;</span><br><span class="line">            &#x2F;&#x2F;深层次对比，递归</span><br><span class="line">            updateChildren(childVnode, newChildVnode)</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            &#x2F;&#x2F;替换</span><br><span class="line">            replaceNode(childVnode,newChildVnode)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function replaceNode (vnode,newVnode) &#123;</span><br><span class="line">    let elem &#x3D; vnode.elem</span><br><span class="line">    let newElem &#x3D; createElements(newVnode)</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;替换</span><br><span class="line">    .......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="diff算法还包括"><a href="#diff算法还包括" class="headerlink" title="diff算法还包括"></a>diff算法还包括</h3><ul>
<li>节点新增和删除</li>
<li>节点重新排序</li>
<li>节点属性、样式、时间绑定</li>
<li>如何极致压榨新能</li>
<li>……….</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-07T12:19:31.000Z">2020-01-07</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    8 分钟 读完 (大约 1219 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/07/js%E4%B8%AD%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%82%E6%AD%A5%E5%92%8C%E5%8D%95%E7%BA%BF%E7%A8%8B%EF%BC%8C%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%E5%BC%82%E6%AD%A5/">js中为什么异步和单线程，怎么处理异步</a>
            
        </h1>
        <div class="content">
            <h1 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h1><ul>
<li>什么是单线程，和异步有什么关系</li>
<li>什么是event-loop</li>
<li>是否使用过jQuery的Deferred</li>
<li>Promise的基本使用和原理</li>
<li>介绍一下async/await（和promise的区别、联系）</li>
<li>总结一下当前JS解决异步的方案</li>
</ul>
<h2 id="1-什么是单线程，和异步的关系"><a href="#1-什么是单线程，和异步的关系" class="headerlink" title="1. 什么是单线程，和异步的关系"></a>1. 什么是单线程，和异步的关系</h2><ul>
<li>单线程-只有一个线程，同时只能做一件事</li>
<li>原因：避免DOM渲染的冲突<ul>
<li>浏览器需要渲染DOM</li>
<li>JS可以修改DOM结构</li>
<li>JS执行的时候，浏览器DOM渲染会暂停</li>
<li>两端JS也不能同时执行（都修改DOM就冲突了）</li>
<li>webworker支持多线程，但不能访问DOM（可以说明单线程目的是为了避免DOM渲染冲突）</li>
</ul>
</li>
<li>解决方案（单线程）-异步</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var i,sum&#x3D;0;</span><br><span class="line">    console.log(&quot;start&quot;);</span><br><span class="line">    for(i &#x3D; 0; i &lt; 1000000000; i++)&#123;</span><br><span class="line">        sum++</span><br><span class="line">    &#125;    &#x2F;&#x2F;必须等for循环执行完，才会执行下面的代码</span><br><span class="line">    alert(&quot;hello&quot;) &#x2F;&#x2F;必须点击确认，才会执行下面的</span><br><span class="line">    console.log(sum);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="解决方案–异步"><a href="#解决方案–异步" class="headerlink" title="解决方案–异步"></a>解决方案–异步</h4><h5 id="callback"><a href="#callback" class="headerlink" title="callback"></a>callback</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#39;start-1&#39;)</span><br><span class="line">setTimeout (function () &#123;  &#x2F;&#x2F;this is a callback</span><br><span class="line">    console.log(&#39;start-2&#39;)</span><br><span class="line">&#125;,1000)</span><br><span class="line">&#x2F;&#x2F;  先把定时器放在一边，继续执行下面的</span><br><span class="line">console.log(&#39;start-3&#39;)</span><br><span class="line">console.log(&#39;end&#39;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ajax</span><br><span class="line">console.log(&#39;start&#39;)</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url:&quot;xxx&quot;,</span><br><span class="line">    success: function (res) &#123; &#x2F;&#x2F;this is a callback</span><br><span class="line">        console.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(&#39;end&#39;)</span><br></pre></td></tr></table></figure>

<h5 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h5><ul>
<li>没有按照书写方式执行，可读性查</li>
<li>callback hell的问题，不利于维护，耦合度太高</li>
</ul>
<h2 id="2-什么是event-loop"><a href="#2-什么是event-loop" class="headerlink" title="2. 什么是event-loop"></a>2. 什么是event-loop</h2><ul>
<li>事件轮询，JS实现异步的具体解决方案</li>
<li>同步代码，直接执行</li>
<li>异步函数先放在 异步队列当中</li>
<li>待同步函数执行完毕，轮询执行 异步队列的函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function () &#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">&#125;,0)  &#x2F;&#x2F;虽然是0ms，但是会先加入异步队列</span><br><span class="line">console.log(1)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;结果：</span><br><span class="line">&#x2F;&#x2F;2 </span><br><span class="line">&#x2F;&#x2F;1</span><br></pre></td></tr></table></figure>

<h2 id="3-jQuery中的Deferred"><a href="#3-jQuery中的Deferred" class="headerlink" title="3. jQuery中的Deferred"></a>3. jQuery中的Deferred</h2><ul>
<li>jQuery 1.5的变化（加入了Deferred）</li>
<li>使用jQuery Deferred</li>
<li>初步引入Promise概念</li>
<li>无法改变JS异步和单线程的本质</li>
<li>只能从写法上杜绝 callback 这种形式</li>
<li>它是一种语法糖形式，但是解耦了代码</li>
<li>很好的体现：开放封闭原则</li>
</ul>
<h4 id="jQuery1-5之前"><a href="#jQuery1-5之前" class="headerlink" title="jQuery1.5之前"></a>jQuery1.5之前</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var ajax &#x3D; $.ajax(&#123;</span><br><span class="line">    url:&quot;&quot;,</span><br><span class="line">    success: function (res) &#123;</span><br><span class="line">        console.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="jQuery1-5之后加入Deferred"><a href="#jQuery1-5之后加入Deferred" class="headerlink" title="jQuery1.5之后加入Deferred"></a>jQuery1.5之后加入Deferred</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">var ajax &#x3D; $.ajax(&quot;.&#x2F;data.json&quot;)</span><br><span class="line"></span><br><span class="line">ajax.done(function () &#123;</span><br><span class="line">    console.log(&quot;success&quot;)</span><br><span class="line">&#125;).fail(function () &#123;</span><br><span class="line">    console.log(&quot;fail&quot;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function waitHandle() &#123;</span><br><span class="line">    var dtd &#x3D; $.Deferred();</span><br><span class="line">    var wait &#x3D; function (dtd) &#123;</span><br><span class="line">        var task &#x3D; function () &#123;</span><br><span class="line">            console.log(&quot;success!&quot;)</span><br><span class="line">            dtd.resolve()</span><br><span class="line">        &#125;</span><br><span class="line">        setTimeout(task,200)</span><br><span class="line">        return dtd.promise  &#x2F;&#x2F;返回一个promise对象</span><br><span class="line">    &#125;</span><br><span class="line">    return wait(dtd)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var w &#x3D; waitHandle()</span><br><span class="line">$.when(w)</span><br><span class="line">.then(function () &#123;</span><br><span class="line">    console.log(&quot;ok 1&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">.then(function () &#123;</span><br><span class="line">    console.log(&quot;ok 2&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="4-Promise-的基本使用和原理"><a href="#4-Promise-的基本使用和原理" class="headerlink" title="4. Promise 的基本使用和原理"></a>4. Promise 的基本使用和原理</h2><ul>
<li>基本语法</li>
<li>异常捕获</li>
<li>多个串联（顺序执行）</li>
<li>Promise.all 和 Promise.race</li>
<li>Promise的标准</li>
</ul>
<h2 id="解决Callback-Hell"><a href="#解决Callback-Hell" class="headerlink" title="解决Callback Hell"></a>解决Callback Hell</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function loadImg (src,callback,fail) &#123;</span><br><span class="line"></span><br><span class="line">    var img &#x3D; document.createElement(&#39;img&#39;);</span><br><span class="line"></span><br><span class="line">    img.onload &#x3D; function () &#123;</span><br><span class="line">        callback(img)</span><br><span class="line">    &#125;</span><br><span class="line">    img.onerror &#x3D; function () &#123;</span><br><span class="line">        fail()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    img.src &#x3D; src;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var src &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">loadImg(src,function (img) &#123;</span><br><span class="line">    alert(img.width)</span><br><span class="line">&#125;,function () &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="使用-Promise语法"><a href="#使用-Promise语法" class="headerlink" title="使用 Promise语法"></a>使用 Promise语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">function loadImg (src) &#123;</span><br><span class="line">    const promise &#x3D; new Promise(function(resolve,reject) &#123;</span><br><span class="line">        var img &#x3D; document.createElement(&quot;img&quot;)</span><br><span class="line">        img.onload &#x3D; function () &#123;</span><br><span class="line">            resolve(img)</span><br><span class="line">        &#125;</span><br><span class="line">        img.onerror &#x3D; function () &#123;</span><br><span class="line">            reject()</span><br><span class="line">        &#125;</span><br><span class="line">        img.src &#x3D; src </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var src &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">loadImg(src)</span><br><span class="line">.then(function (img) &#123;</span><br><span class="line">    alert(img.width)</span><br><span class="line">    document.body.append(img)</span><br><span class="line">&#125;,function () &#123;</span><br><span class="line">    alert(&quot;loading fail&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function () &#123;</span><br><span class="line">    alert(&quot;error&quot;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;串联Promise</span><br><span class="line">var src1 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">var src2 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">var res1 &#x3D; loadImg(src1)</span><br><span class="line">var res2 &#x3D; loadImg(src2)</span><br><span class="line"></span><br><span class="line">res1.then(function (img)&#123;</span><br><span class="line">    console.log(&quot;第一个图片加载完毕！&quot;)</span><br><span class="line">    document.body.append(img)</span><br><span class="line">    return res2</span><br><span class="line">&#125;)</span><br><span class="line">.then(function (img) &#123;</span><br><span class="line">    console.log(&quot;第二张图片加载完毕！&quot;)</span><br><span class="line">    document.body.append(img)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function (err) &#123;</span><br><span class="line">    alert(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<h4 id="Promise-all-amp-Promise-race"><a href="#Promise-all-amp-Promise-race" class="headerlink" title="Promise.all &amp; Promise.race"></a>Promise.all &amp; Promise.race</h4><p>Promise.all 接收一个promise 对象的数组，待全部完成之后，统一执行 success</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var src1 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line">var src2 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">var res1 &#x3D; loadImg(src1)</span><br><span class="line">var res2 &#x3D; loadImg(src2)</span><br><span class="line"></span><br><span class="line">Promise.all([res1,res2]).then(function (datas) &#123;</span><br><span class="line">    console.log(datas[0])</span><br><span class="line">    console.log(datas[1])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Promise.race接收一个数组,race的意思就是比赛的意思，第一个完成的Promise对象会被作为参数传给回调函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var src1 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_ne2w.png&quot;</span><br><span class="line">var src2 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">var res1 &#x3D; loadImg(src1)</span><br><span class="line">var res2 &#x3D; loadImg(src2)</span><br><span class="line"></span><br><span class="line">Promise.race([res1,res2]).then(function (data) &#123;</span><br><span class="line">    console.log(&#39;race&#39;,data)</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line">.catch(function (err) &#123;</span><br><span class="line">    alert(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<h1 id="关于-async-await"><a href="#关于-async-await" class="headerlink" title="关于 async/await"></a>关于 async/await</h1><ul>
<li>then只是将callback拆分了</li>
<li>async/await是最直接的同步写法</li>
<li>使用 await，函数必须用async表示</li>
<li>await 后面跟的是一个Promise实例</li>
<li>需要babel-polyfill<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">function loadImg (src) &#123;</span><br><span class="line">    const promise &#x3D; new Promise(function(resolve,reject) &#123;</span><br><span class="line">        var img &#x3D; document.createElement(&quot;img&quot;)</span><br><span class="line">        img.onload &#x3D; function () &#123;</span><br><span class="line">            resolve(img)</span><br><span class="line">        &#125;</span><br><span class="line">        img.onerror &#x3D; function () &#123;</span><br><span class="line">            reject()</span><br><span class="line">        &#125;</span><br><span class="line">        img.src &#x3D; src </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return promise</span><br><span class="line">&#125;</span><br><span class="line">var src1 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_ne2w.png&quot;</span><br><span class="line">var src2 &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">const load &#x3D; async function () &#123;</span><br><span class="line">    const result1 &#x3D; await loadImg(src1)</span><br><span class="line">    console.log(result1)</span><br><span class="line">    const result1 &#x3D; await loadImg(src1)</span><br><span class="line">    console.log(result1)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">load()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="关于-Generator"><a href="#关于-Generator" class="headerlink" title="关于 Generator"></a>关于 Generator</h2><ul>
<li>原理比较复杂</li>
<li>不是异步的直接代替方式</li>
<li>有更好简洁的的解决方案 aysnc/await</li>
<li>koa 也放弃了Generator去使用 aysnc/await</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function* gen () &#123;</span><br><span class="line">    yield asyncLog(1);</span><br><span class="line">    yield asyncLog(2);</span><br><span class="line">    yield asyncLog(3);</span><br><span class="line">    yield asyncLog(4);</span><br><span class="line">    &#x2F;&#x2F; return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function asyncLog (num) &#123;</span><br><span class="line">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        console.log(&#96;这是第$&#123;num&#125;次的调用&#96;);</span><br><span class="line">    &#125;, 2000);</span><br><span class="line"></span><br><span class="line">    return num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function* f1 () &#123;</span><br><span class="line">    for(let i &#x3D;0;i;i++)&#123;</span><br><span class="line">        var reset &#x3D; yield i;</span><br><span class="line">        if(reset) &#123;</span><br><span class="line">            i &#x3D;-1;</span><br><span class="line">            console.log(&quot;true&quot;);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var g1  &#x3D; f1()</span><br></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-06T07:40:06.000Z">2020-01-06</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 609 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/06/ES6%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">ES6基本语法</a>
            
        </h1>
        <div class="content">
            <h1 id="模块化-babel-js"><a href="#模块化-babel-js" class="headerlink" title="模块化 babel.js"></a>模块化 babel.js</h1><h2 id="export-default-是一个的话，就可以直接引入"><a href="#export-default-是一个的话，就可以直接引入" class="headerlink" title="export default 是一个的话，就可以直接引入"></a>export default 是一个的话，就可以直接引入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;utils.js</span><br><span class="line">export default &#123;</span><br><span class="line">    name:&quot;Wang Junping&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;index.js</span><br><span class="line">import utils from &#39;.&#x2F;utils.js&#39;</span><br><span class="line">console.log(utils.name)  </span><br><span class="line">&#x2F;&#x2F;报错</span><br></pre></td></tr></table></figure>
<p>使用 babel-node index.js就没问题了  我觉得应该是不支持 import语法吧</p>
<p>##Babel 使用</p>
<ol>
<li><p>下载babel：cnpm install –save-dev babel-core babel-preset-es2015 babel-preset-latest</p>
</li>
<li><p>在根目录下新建 <code>.babelrc</code> 文件并写入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [&quot;es2015&quot;,&quot;latest&quot;],</span><br><span class="line">    &quot;plugins&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<ol start="3">
<li>下载babel-cli <code>npm install -g babel-cli</code></li>
</ol>
<ol start="4">
<li>在src文件夹下新建index.js,用ES6箭头函数语法写代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var arr &#x3D; [1,2,3].map((item) &#x3D;&gt; item+1)</span><br></pre></td></tr></table></figure></li>
<li>命令行输入<code>babel ./src/index.js</code></li>
</ol>
<h2 id="开发环境-webpack"><a href="#开发环境-webpack" class="headerlink" title="开发环境- webpack"></a>开发环境- webpack</h2><ul>
<li>npm install webpack babel-loader –save-dev</li>
<li>配置 webpack.config.js</li>
<li>配置 package.json中的scripts</li>
<li>运行 npm start</li>
</ul>
<h1 id="Class和普通构造函数有什么区别"><a href="#Class和普通构造函数有什么区别" class="headerlink" title="Class和普通构造函数有什么区别"></a>Class和普通构造函数有什么区别</h1><h2 id="JS构造函数"><a href="#JS构造函数" class="headerlink" title="JS构造函数"></a>JS构造函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function MathHandle (x,y) &#123;</span><br><span class="line">    this.x &#x3D; x;</span><br><span class="line">    this.y &#x3D; y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MathHandle.prototype.add &#x3D; function (x,y) &#123;</span><br><span class="line">    return this.x + this.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var m &#x3D; new MathHandle(2,3)</span><br><span class="line">console.log(m.add())  &#x2F;&#x2F;5</span><br></pre></td></tr></table></figure>

<h2 id="Class语法"><a href="#Class语法" class="headerlink" title="Class语法"></a>Class语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class MathHandle &#123;</span><br><span class="line">    constructor(x,y) &#123;</span><br><span class="line">        this.x &#x3D; x;</span><br><span class="line">        this.y &#x3D; y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    add() &#123;</span><br><span class="line">        return this.x + this.y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const m &#x3D; new MathHandle(1,2);</span><br><span class="line">console.log(m.add()) &#x2F;&#x2F;3</span><br><span class="line"></span><br><span class="line">console.log(typeof MathHandle2) &#x2F;&#x2F; &quot;function&quot;</span><br><span class="line">console.log(MathHandle2.prototype.constructor &#x3D;&#x3D;&#x3D; MathHandle2) &#x2F;&#x2F;true</span><br><span class="line">console.log(m2.__proto__ &#x3D;&#x3D;&#x3D; MathHandle2.prototype) &#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>
<h4 id="所以Class本身是一个语法糖，本质还是构造函数"><a href="#所以Class本身是一个语法糖，本质还是构造函数" class="headerlink" title="所以Class本身是一个语法糖，本质还是构造函数"></a>所以Class本身是一个语法糖，本质还是构造函数</h4><h2 id="继承-JS"><a href="#继承-JS" class="headerlink" title="继承-JS"></a>继承-JS</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Animal () &#123;</span><br><span class="line">    this.eat &#x3D; function () &#123;</span><br><span class="line">        console.log(&quot;animal eat&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;狗</span><br><span class="line">function Dog () &#123;</span><br><span class="line">    this.bark &#x3D; function () &#123;</span><br><span class="line">        console,log(&quot;dog bark&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dog.prototy &#x3D; new Animal()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;哈士奇</span><br><span class="line">var hashiqi &#x3D; new Dog()</span><br></pre></td></tr></table></figure>

<h2 id="继承-Class"><a href="#继承-Class" class="headerlink" title="继承 Class"></a>继承 Class</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        this.name &#x3D; name</span><br><span class="line">    &#125;</span><br><span class="line">    eat() &#123;</span><br><span class="line">        console.log(&#96;$&#123;this.name&#125; eat&#96;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Dog extends Animal &#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        super(name)         &#x2F;&#x2F;只要是extends的，super()是一定要加上的</span><br><span class="line">        this.name &#x3D; name</span><br><span class="line">    &#125;</span><br><span class="line">    say() &#123;</span><br><span class="line">        console.log(&#96;$&#123;this.name&#125; eat &#96;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const dog &#x3D; new Dog(&quot;哈士奇&quot;)</span><br><span class="line">dog.say()  &#x2F;&#x2F;哈士奇 bark </span><br><span class="line">dog.eat()  &#x2F;&#x2F;哈士奇 eat</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>Class 在语法上更加贴合面向对象的写法</li>
<li>Class 在实现继承上更加易读、理解</li>
<li>更易于写Java等后端语言的使用</li>
<li>本质是语法糖，还是使用 prototype</li>
</ul>
<h1 id="Promise-的基本使用"><a href="#Promise-的基本使用" class="headerlink" title="Promise 的基本使用"></a>Promise 的基本使用</h1><h2 id="解决Callback-Hell"><a href="#解决Callback-Hell" class="headerlink" title="解决Callback Hell"></a>解决Callback Hell</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function loadImg (src,callback,fail) &#123;</span><br><span class="line"></span><br><span class="line">    var img &#x3D; document.createElement(&#39;img&#39;);</span><br><span class="line"></span><br><span class="line">    img.onload &#x3D; function () &#123;</span><br><span class="line">        callback(img)</span><br><span class="line">    &#125;</span><br><span class="line">    img.onerror &#x3D; function () &#123;</span><br><span class="line">        fail()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    img.src &#x3D; src;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var src &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">loadImg(src,function (img) &#123;</span><br><span class="line">    alert(img.width)</span><br><span class="line">&#125;,function () &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="使用-Promise语法"><a href="#使用-Promise语法" class="headerlink" title="使用 Promise语法"></a>使用 Promise语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function loadImg (src) &#123;</span><br><span class="line">    const promise &#x3D; new Promise(function(resolve,reject) &#123;</span><br><span class="line">        var img &#x3D; document.createElement(&quot;img&quot;)</span><br><span class="line">        img.onload &#x3D; function () &#123;</span><br><span class="line">            resolve(img)</span><br><span class="line">        &#125;</span><br><span class="line">        img.onerror &#x3D; function () &#123;</span><br><span class="line">            reject()</span><br><span class="line">        &#125;</span><br><span class="line">        img.src &#x3D; src </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var src &#x3D; &quot;http:&#x2F;&#x2F;www.imooc.com&#x2F;static&#x2F;img&#x2F;index&#x2F;logo_new.png&quot;</span><br><span class="line"></span><br><span class="line">loadImg(src)</span><br><span class="line">.then(function (img) &#123;</span><br><span class="line">    alert(img.width)</span><br><span class="line">    document.body.append(img)</span><br><span class="line">&#125;,function () &#123;</span><br><span class="line">    alert(&quot;loading fail&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function () &#123;</span><br><span class="line">    alert(&quot;error&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="总结一下ES6-其他常用功能"><a href="#总结一下ES6-其他常用功能" class="headerlink" title="总结一下ES6 其他常用功能"></a>总结一下ES6 其他常用功能</h2><ul>
<li><code>let/const</code></li>
<li>多行字符串/模板变量 <code>${}</code></li>
<li>解构赋值</li>
<li>块级作用域</li>
<li>函数默认参数</li>
<li>箭头函数（清晰了this指向）</li>
</ul>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/3/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><a class="pagination-link is-current" href="/page/2/">2</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/3/">3</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/avatar.png" alt="Your name">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Your name
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Your title
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Your location</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            27
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            0
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            35
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">
                关注我</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Github" href="https://github.com/ppoffice">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/BOM/" style="font-size: 10px;">BOM</a> <a href="/tags/CSS/" style="font-size: 20px;">CSS</a> <a href="/tags/DOM/" style="font-size: 15px;">DOM</a> <a href="/tags/ES5/" style="font-size: 10px;">ES5</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/Echarts/" style="font-size: 10px;">Echarts</a> <a href="/tags/MVVM/" style="font-size: 10px;">MVVM</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/background-ground/" style="font-size: 10px;">background-ground</a> <a href="/tags/cookies/" style="font-size: 10px;">cookies</a> <a href="/tags/diff/" style="font-size: 10px;">diff</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/padding/" style="font-size: 10px;">padding</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/token/" style="font-size: 10px;">token</a> <a href="/tags/vue/" style="font-size: 20px;">vue</a> <a href="/tags/vuex/" style="font-size: 10px;">vuex</a> <a href="/tags/%E4%BA%8B%E4%BB%B6/" style="font-size: 10px;">事件</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 10px;">动态规划</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">博客</a> <a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 10px;">命令</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 10px;">数组</a> <a href="/tags/%E6%A0%88/" style="font-size: 10px;">栈</a> <a href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" style="font-size: 10px;">源码阅读</a> <a href="/tags/%E7%9B%92%E6%A8%A1%E5%9E%8B/" style="font-size: 10px;">盒模型</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 20px;">算法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 10px;">编译原理</a> <a href="/tags/%E8%99%9A%E6%8B%9FDOM/" style="font-size: 10px;">虚拟DOM</a> <a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size: 10px;">贪心</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 10px;">链表</a> <a href="/tags/%E9%98%9F%E5%88%97/" style="font-size: 10px;">队列</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2020/03/09/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="编译原理学习-第一节">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-09T02:09:18.000Z">2020-03-09</time></div>
                    <a href="/2020/03/09/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="title has-link-black-ter is-size-6 has-text-weight-normal">编译原理学习-第一节</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/08/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0-%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="算法数据结构学习-栈和队列">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-08T01:36:06.000Z">2020-03-08</time></div>
                    <a href="/2020/03/08/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0-%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" class="title has-link-black-ter is-size-6 has-text-weight-normal">算法数据结构学习-栈和队列</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/07/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E4%B8%89%E6%9C%88%E4%BB%BD-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="算法学习三月份-第一节">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-07T01:45:06.000Z">2020-03-07</time></div>
                    <a href="/2020/03/07/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E4%B8%89%E6%9C%88%E4%BB%BD-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="title has-link-black-ter is-size-6 has-text-weight-normal">算法学习三月份-第一节</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/03/vue%E5%85%A8%E5%AE%B6%E6%A1%B6%E6%89%93%E9%80%A0%E7%AE%80%E6%98%93%E7%89%88QQ%E9%9F%B3%E4%B9%90webapp/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="vue全家桶打造简易版QQ音乐webapp">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-03T12:20:49.000Z">2020-03-03</time></div>
                    <a href="/2020/03/03/vue%E5%85%A8%E5%AE%B6%E6%A1%B6%E6%89%93%E9%80%A0%E7%AE%80%E6%98%93%E7%89%88QQ%E9%9F%B3%E4%B9%90webapp/" class="title has-link-black-ter is-size-6 has-text-weight-normal">vue全家桶打造简易版QQ音乐webapp</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/02/11/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%93%BE%E8%A1%A8%E7%AF%87/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="算法数据结构-链表篇">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-11T03:29:17.000Z">2020-02-11</time></div>
                    <a href="/2020/02/11/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%93%BE%E8%A1%A8%E7%AF%87/" class="title has-link-black-ter is-size-6 has-text-weight-normal">算法数据结构-链表篇</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BOM/">
                        <span class="tag">BOM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSS/">
                        <span class="tag">CSS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DOM/">
                        <span class="tag">DOM</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ES5/">
                        <span class="tag">ES5</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ES6/">
                        <span class="tag">ES6</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Echarts/">
                        <span class="tag">Echarts</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MVVM/">
                        <span class="tag">MVVM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Promise/">
                        <span class="tag">Promise</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Vue/">
                        <span class="tag">Vue</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/background-ground/">
                        <span class="tag">background-ground</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/cookies/">
                        <span class="tag">cookies</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/diff/">
                        <span class="tag">diff</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/github/">
                        <span class="tag">github</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/node/">
                        <span class="tag">node</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/padding/">
                        <span class="tag">padding</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/session/">
                        <span class="tag">session</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/token/">
                        <span class="tag">token</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/vue/">
                        <span class="tag">vue</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/vuex/">
                        <span class="tag">vuex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E4%BA%8B%E4%BB%B6/">
                        <span class="tag">事件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">
                        <span class="tag">动态规划</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/">
                        <span class="tag">博客</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4/">
                        <span class="tag">命令</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%95%B0%E7%BB%84/">
                        <span class="tag">数组</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%A0%88/">
                        <span class="tag">栈</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/">
                        <span class="tag">源码阅读</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%9B%92%E6%A8%A1%E5%9E%8B/">
                        <span class="tag">盒模型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">
                        <span class="tag">编译原理</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E8%99%9A%E6%8B%9FDOM/">
                        <span class="tag">虚拟DOM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E8%B4%AA%E5%BF%83/">
                        <span class="tag">贪心</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/">
                        <span class="tag">链表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E9%98%9F%E5%88%97/">
                        <span class="tag">队列</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2020/03/09/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="编译原理学习-第一节">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-09T02:09:18.000Z">2020-03-09</time></div>
                    <a href="/2020/03/09/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="title has-link-black-ter is-size-6 has-text-weight-normal">编译原理学习-第一节</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/08/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0-%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="算法数据结构学习-栈和队列">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-08T01:36:06.000Z">2020-03-08</time></div>
                    <a href="/2020/03/08/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0-%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" class="title has-link-black-ter is-size-6 has-text-weight-normal">算法数据结构学习-栈和队列</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/07/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E4%B8%89%E6%9C%88%E4%BB%BD-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="算法学习三月份-第一节">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-07T01:45:06.000Z">2020-03-07</time></div>
                    <a href="/2020/03/07/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E4%B8%89%E6%9C%88%E4%BB%BD-%E7%AC%AC%E4%B8%80%E8%8A%82/" class="title has-link-black-ter is-size-6 has-text-weight-normal">算法学习三月份-第一节</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/03/vue%E5%85%A8%E5%AE%B6%E6%A1%B6%E6%89%93%E9%80%A0%E7%AE%80%E6%98%93%E7%89%88QQ%E9%9F%B3%E4%B9%90webapp/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="vue全家桶打造简易版QQ音乐webapp">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-03T12:20:49.000Z">2020-03-03</time></div>
                    <a href="/2020/03/03/vue%E5%85%A8%E5%AE%B6%E6%A1%B6%E6%89%93%E9%80%A0%E7%AE%80%E6%98%93%E7%89%88QQ%E9%9F%B3%E4%B9%90webapp/" class="title has-link-black-ter is-size-6 has-text-weight-normal">vue全家桶打造简易版QQ音乐webapp</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/02/11/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%93%BE%E8%A1%A8%E7%AF%87/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="算法数据结构-链表篇">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-11T03:29:17.000Z">2020-02-11</time></div>
                    <a href="/2020/02/11/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%93%BE%E8%A1%A8%E7%AF%87/" class="title has-link-black-ter is-size-6 has-text-weight-normal">算法数据结构-链表篇</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BOM/">
                        <span class="tag">BOM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSS/">
                        <span class="tag">CSS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DOM/">
                        <span class="tag">DOM</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ES5/">
                        <span class="tag">ES5</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ES6/">
                        <span class="tag">ES6</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Echarts/">
                        <span class="tag">Echarts</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MVVM/">
                        <span class="tag">MVVM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Promise/">
                        <span class="tag">Promise</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Vue/">
                        <span class="tag">Vue</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/background-ground/">
                        <span class="tag">background-ground</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/cookies/">
                        <span class="tag">cookies</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/diff/">
                        <span class="tag">diff</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/github/">
                        <span class="tag">github</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/node/">
                        <span class="tag">node</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/padding/">
                        <span class="tag">padding</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/session/">
                        <span class="tag">session</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/token/">
                        <span class="tag">token</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/vue/">
                        <span class="tag">vue</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/vuex/">
                        <span class="tag">vuex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E4%BA%8B%E4%BB%B6/">
                        <span class="tag">事件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">
                        <span class="tag">动态规划</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/">
                        <span class="tag">博客</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4/">
                        <span class="tag">命令</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%95%B0%E7%BB%84/">
                        <span class="tag">数组</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%A0%88/">
                        <span class="tag">栈</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/">
                        <span class="tag">源码阅读</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%9B%92%E6%A8%A1%E5%9E%8B/">
                        <span class="tag">盒模型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">
                        <span class="tag">编译原理</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E8%99%9A%E6%8B%9FDOM/">
                        <span class="tag">虚拟DOM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E8%B4%AA%E5%BF%83/">
                        <span class="tag">贪心</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/">
                        <span class="tag">链表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E9%98%9F%E5%88%97/">
                        <span class="tag">队列</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="欢迎" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 John Doe&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'http://yoursite.com',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>